Metadata-Version: 2.1
Name: collective.prometheus
Version: 1.6.0
Summary: Prometheus integration for Zope/Plone.
Home-page: https://github.com/collective/collective.prometheus
Author: Rob McBroom
Author-email: rob@sixfeetup.com
License: GPL
Keywords: plone zope prometheus monitoring
Platform: Any
Classifier: Programming Language :: Python
Classifier: Framework :: Plone
Classifier: Framework :: ZODB
Classifier: Framework :: Zope2
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: System Administrators
Classifier: Programming Language :: Python
Classifier: Topic :: System :: Networking :: Monitoring
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Dist: setuptools
Provides-Extra: test
Requires-Dist: plone.app.testing ; extra == 'test'
Provides-Extra: zserver
Requires-Dist: Products.ZServerViews (>=0.2) ; extra == 'zserver'



This package publishes Plone statistics in a format that can be consumed by Prometheus_.

It was largely based on ``munin.zope``. See https://pypi.org/project/munin.zope/

It provides the following data:

  * The number of running Zope ZServer threads (with the `zserver` extra)
  * The number of Zope ZServer threads not in use (with the `zserver` extra)
  * The number of objects in the Zope database
  * Memory used by the Zope cache
  * The number of objects that can be stored in the Zope cache
  * ZODB load count
  * ZODB store count
  * ZODB connections
  * Active Zope Objects
  * Total Zope Objects

Installation (using Buildout)
-----------------------------

Add ``collective.prometheus`` to your instance eggs in ``buildout.cfg``.

Usage
-----

Assuming Plone listens on ``localhost:8000``, start your Plone instance and visit http://localhost:8000/@@metrics to see the output and confirm that data is being reported.

If so, add a job to your ``scrape_configs`` in ``pometheus.yaml``:

.. code-block:: yaml

    - job_name: 'plone'
      metrics_path: '/@@metrics'
      static_configs:
      - targets: ['localhost:8000']

.. _Prometheus: https://prometheus.io/

1.6.0

  * rename zope_cache_objects to zope_total_objects to better reflect what it shows

1.5.0

  * Change zodb_load_count and zodb_store_count from Counter to Guage

1.4.0

  * Use `getActivityAnalysis()` for ZODB activity

1.3.1

  * make ZServer monitoring optional
  * Skip ZODB activity if unavailable

1.3.0

  * Zope 4 compatibility, make ZServer monitoring optional with the `zserver`
    extra

1.2.1

  * Fix a typo in output

1.2

  * Add documentation
  * Number Zope connections instead of using their ID

1.1

  * Add per connection caches active and total object counts

1.0

  * Initial release


