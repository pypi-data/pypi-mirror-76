#!/bin/sh

. ${0%/*}/test_helper.sh

tuxbuild_build="tuxbuild build --git-repo https://github.com/torvalds/linux.git --git-ref master --target-arch arm64 --kconfig defconfig --toolchain gcc-9"

test_build_pass() {
    api_v1 --build-failure-rate=0
    run ${tuxbuild_build}
    assertEquals 0 "$status"
}

test_build_fail() {
    api_v1 --build-failure-rate=100
    run ${tuxbuild_build}
    assertEquals 1 "$status"
}

. shunit2
