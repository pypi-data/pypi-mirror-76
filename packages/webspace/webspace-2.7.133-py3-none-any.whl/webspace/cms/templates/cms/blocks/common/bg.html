{% load wagtailimages_tags wagtailcore_tags %}

{% if request.user_agent.is_pc and value.bg_desktop %}

    <div class="bg-container">
        {% for media in value.bg_desktop %}
            <div class="bg-container-item {% if pos %}bg-pos-{{ pos }}{% endif %}"
                    {% if media.block_type == 'svg' %}
                 {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ media.value.url }}"
                 {% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                    {% elif media.block_type == 'image' %}
                        {% image media.value width-1920 as img %}
                 {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ img.url }}"
                 {% else %}style="background-image: url({{ img.url }})"{% endif %}
                    {% endif %}
            ></div>
        {% endfor %}
    </div>

{% endif %}

{% if not request.user_agent.is_pc and value.bg_mobile %}

    <div class="bg-container">
        {% for media in value.bg_mobile %}
            <div class="bg-container-item {% if value.svg_bg_position %}bg-pos-{{ value.svg_bg_position }}{% endif %}"
                    {% if media.block_type == 'svg' %}
                 {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ media.value.url }}"
                 {% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                    {% elif media.block_type == 'image' %}
                        {% image media.value width-600 as img %}
                 {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ img.url }}"
                 {% else %}style="background-image: url({{ img.url }})"{% endif %}
                    {% endif %}
            ></div>
        {% endfor %}
    </div>

{% endif %}