{% load wagtailimages_tags wagtailcore_tags my %}

<div id="block-{{ block_num }}" class="{% if block_num == 1 %}header-padding {% endif %}{{ block.block_type }} {% block block_theme_bg %}{% if value.theme %}theme-bg-{{ value.theme }}{% endif %}{% endblock block_theme_bg %} {% if value.bg_desktop or value.bg_mobile %}{% if block_num >= 2 %}lazy{% endif %}{% endif %}"
>
        {% if request.user_agent.is_pc and value.bg_desktop %}

            <div class="bg-container">
                {% for media in value.bg_desktop %}
                    <div class="bg-container-item {% if value.svg_bg_position %}bg-pos-{{ value.svg_bg_position }}{% endif %}"
                        {% if media.block_type == 'svg' %}
                            {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ media.value.url }}"{% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                        {% elif media.block_type == 'image' %}
                            {% image media.value width-1920 as img %}
                            {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ img.url }}"{% else %}style="background-image: url({{ img.url }})"{% endif %}
                        {% endif %}
                    ></div>
                {% endfor %}
            </div>

        {% endif %}

        {% if not request.user_agent.is_pc and value.bg_mobile %}

            <div class="bg-container">
                {% for media in value.bg_mobile %}
                    <div class="bg-container-item {% if value.svg_bg_position %}bg-pos-{{ value.svg_bg_position }}{% endif %}"
                        {% if media.block_type == 'svg' %}
                            {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ media.value.url }}"{% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                        {% elif media.block_type == 'image' %}
                            {% image media.value width-600 as img %}
                            {% if block_num >= 2 and not amp or forloop.counter0 > 0 and not amp %}data-src="{{ img.url }}"{% else %}style="background-image: url({{ img.url }})"{% endif %}
                        {% endif %}
                    ></div>
                {% endfor %}
            </div>

        {% endif %}

    <div class="container {{ value.container }} {% if not value.padding_top %}nopadtop{% endif %} {% if not value.padding_bottom %}nopadbottom{% endif %} {% block theme %}theme-{{ value.theme }}{% endblock %}">
        {% block block_content %}
        {% endblock %}
    </div>
</div>
{% comment %}

{% if request.user_agent.is_pc %}
            {% if media %}
                {% if media.block_type == 'svg' %}
                    {% if block_num >= 2 and not amp %}data-src="{{ media.value.url }}"{% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                {% elif media.block_type == 'image' %}
                    {% image media.value fill-1920x1080 as img %}
                    {% if block_num >= 2 and not amp %}data-src="{{ img.url }}"{% else %}style="background-image: url({{ img.url }})"{% endif %}
                {% endif %}
            {% endif %}
            {% if value.bg_desktop|length > 1 %}
                data-bgslide='{% for media in value.bg_desktop %}"{% if media.block_type == 'svg' %}{{ media.value.url }}{% else %}{% image media.value fill-1920x1080 as img %}{{ img.url }}{% endif %}"{% if not forloop.last %},{% endif %}{% endfor %}'
            {% endif %}
        {% endif %}
        {% if not request.user_agent.is_pc %}
            {% for media in value.bg_mobile %}
                {% if media.block_type == 'svg' %}
                    {% if block_num >= 2 and not amp %}data-src="{{ media.value.url }}"{% else %}style="background-image: url({{ media.value.url }})"{% endif %}
                {% elif media.block_type == 'image' %}
                    {% image media.value fill-1920x1080 as img %}
                    {% if block_num >= 2 and not amp %}data-src="{{ img.url }}"{% else %}style="background-image: url({{ img.url }})"{% endif %}
                {% endif %}
            {% endfor %}
        {% endif %}{% endcomment %}
