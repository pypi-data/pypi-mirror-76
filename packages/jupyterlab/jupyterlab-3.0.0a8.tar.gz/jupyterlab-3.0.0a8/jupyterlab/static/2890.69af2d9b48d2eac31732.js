(window["webpackJsonp_jupyterlab_application_top"]=window["webpackJsonp_jupyterlab_application_top"]||[]).push([[2890,5720],{RvPL:(e,t,o)=>{"use strict";o.r(t);o.d(t,{IEditorTracker:()=>i,TabSpaceStatus:()=>l,FileEditor:()=>f,FileEditorCodeWrapper:()=>C,FileEditorFactory:()=>v});var s=o("l37l");const i=new s.Token("@jupyterlab/fileeditor:IEditorTracker");var n=o("yR1x");var r=o.n(n);var c=o("zYbb");var a=o("V3w5");var d=o("tUVX");function h(e){const t=e.isSpaces?"Spaces":"Tab Size";return r().createElement(d.TextItem,{onClick:e.handleClick,source:`${t}: ${e.tabSpace}`,title:`Change Tab indentationâ€¦`})}class l extends a.VDomRenderer{constructor(e){super(new l.Model);this._popup=null;this._menu=e.menu;this.addClass(d.interactiveItem)}render(){if(!this.model||!this.model.config){return null}else{return r().createElement(h,{isSpaces:this.model.config.insertSpaces,tabSpace:this.model.config.tabSize,handleClick:()=>this._handleClick()})}}_handleClick(){const e=this._menu;if(this._popup){this._popup.dispose()}e.aboutToClose.connect(this._menuClosed,this);this._popup=(0,d.showPopup)({body:e,anchor:this,align:"right"})}_menuClosed(){this.removeClass(d.clickedItem)}}(function(e){class t extends a.VDomModel{constructor(){super(...arguments);this._config=null}get config(){return this._config}set config(e){const t=this._config;this._config=e;this._triggerChange(t,this._config)}_triggerChange(e,t){const o=e&&e.insertSpaces;const s=e&&e.tabSize;const i=t&&t.insertSpaces;const n=t&&t.tabSize;if(o!==i||s!==n){this.stateChanged.emit(void 0)}}}e.Model=t})(l||(l={}));var u=o("51fH");var p=o("Sxpi");var m=o("aV2H");const g="jpCodeRunner";const _="jpUndoer";class C extends c.CodeEditorWrapper{constructor(e){super({factory:e.factory,model:e.context.model});this._ready=new s.PromiseDelegate;const t=this._context=e.context;const o=this.editor;this.addClass("jp-FileEditorCodeWrapper");this.node.dataset[g]="true";this.node.dataset[_]="true";o.model.value.text=t.model.toString();void t.ready.then(()=>{this._onContextReady()});if(t.model.modelDB.isCollaborative){const e=t.model.modelDB;void e.connected.then(()=>{const t=e.collaborators;if(!t){return}const o=t.localCollaborator;this.editor.uuid=o.sessionId;this.editor.selectionStyle=Object.assign(Object.assign({},c.CodeEditor.defaultSelectionStyle),{color:o.color});t.changed.connect(this._onCollaboratorsChanged,this);this._onCollaboratorsChanged()})}}get context(){return this._context}get ready(){return this._ready.promise}_onContextReady(){if(this.isDisposed){return}const e=this._context.model;const t=this.editor;const o=t.model;o.value.text=e.toString();t.clearHistory();e.contentChanged.connect(this._onContentChanged,this);this._ready.resolve(undefined)}_onContentChanged(){const e=this.editor.model;const t=e.value.text;const o=this._context.model.toString();if(t!==o){e.value.text=o}}_onCollaboratorsChanged(){const e=this._context.model.modelDB.collaborators;if(!e){return}for(const t of this.editor.model.selections.keys()){if(!e.has(t)){this.editor.model.selections.delete(t)}}}}class f extends m.Widget{constructor(e){super();this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const o=this.editorWidget=new C(e);this.editor=o.editor;this.model=o.model;t.pathChanged.connect(this._onPathChanged,this);this._onPathChanged();const s=this.layout=new m.StackedLayout;s.addWidget(o)}get context(){return this.editorWidget.context}get ready(){return this.editorWidget.ready}handleEvent(e){if(!this.model){return}switch(e.type){case"mousedown":this._ensureFocus();break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("mousedown",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){if(!this.editor.hasFocus()){this.editor.focus()}}_onPathChanged(){const e=this.editor;const t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}class v extends u.ABCWidgetFactory{constructor(e){super(e.factoryOptions);this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor;const o=e=>t(e);const s=new f({factory:o,context:e,mimeTypeService:this._services.mimeTypeService});s.title.icon=p.textEditorIcon;const i=new u.DocumentWidget({content:s,context:e});return i}}}}]);