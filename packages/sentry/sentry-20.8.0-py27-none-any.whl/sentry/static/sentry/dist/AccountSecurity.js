(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[34],{1599:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(629),a=n.n(r),i=n(484);function o(t,e){var n,r,o,c,s=e.routes,l=e.params,u=e.location,f=e.stepBack,d=s.map((function(t){return t.path||""}));"string"!=typeof t?(c=s.indexOf(t)+1,o=a()(d.slice(0,c),(function(t){return"/"===t[0]}))):o=a()(d,(function(t){return"/"===t[0]}));var b=d.slice(o,c);void 0!==f&&(b=b.slice(0,f));var p=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",h=null!==(r=null==u?void 0:u.hash)&&void 0!==r?r:"",j="".concat(b.join("")).concat("string"!=typeof t?"":t).concat(p).concat(h);return Object(i.a)(j,l)}},1615:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(15),o=n.n(i),c=(n(1),n(46)),s=n.n(c),l=n(0);function u(t){var e=t.underlined,n=t.className,r=o()(t,["underlined","className"]),i=s()("nav nav-tabs",n,{"border-bottom":e});return Object(l.f)("ul",a()({className:i},r))}u.displayName="NavTabs",e.a=u},1625:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(9),o=n.n(i),c=n(10),s=n.n(c),l=n(11),u=n.n(l),f=n(12),d=n.n(f),b=n(6),p=n.n(b),h=n(2),j=n.n(h),v=n(1),O=n.n(v),m=n(182),y=n.n(m),g=n(7),w=n(46),S=n.n(w),q=n(0);function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){u()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(N()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(t=n.call.apply(n,[this].concat(a))).isActive=function(){var e=t.props,n=e.isActive,r=e.to,a=e.query,i=e.index;return(n||t.context.router.isActive)({pathname:r,query:a},i)},t.getClassName=function(){var e={},n=t.props,r=n.className,a=n.activeClassName;return r&&(e[r]=!0),t.isActive()&&(e[a]=!0),S()(e)},t}return s()(r,[{key:"render",value:function(){var t=this.props,e=t.index,n=t.children,r=y()(this.props,"activeClassName","isActive","index");return Object(q.f)("li",{className:this.getClassName()},Object(q.f)(g.Link,a()({},r,{onlyActiveOnIndex:e}),n))}}]),r}(O.a.Component);k.displayName="ListLink",k.displayName="ListLink",k.contextTypes={router:j.a.object.isRequired},k.defaultProps={activeClassName:"active",index:!1},e.a=k},2846:function(t,e,n){"use strict";n.r(e);var r=n(21),a=n.n(r),i=n(26),o=n.n(i),c=n(9),s=n.n(c),l=n(10),u=n.n(l),f=n(11),d=n.n(f),b=n(12),p=n.n(b),h=n(6),j=n.n(h),v=n(4),O=n(1),m=n.n(O),y=n(277),g=n(31),w=n(3),S=n(1586),q=n(29),N=n(639),k=n(618),x=n(626),A=n(1625),C=n(1615),R=n(17),P=n(1603),D=n(35),E=n(1612),z=function(t){return!t.user.isManaged},T=[{title:"Password",fields:[{name:"password",type:"secret",autoComplete:"current-password",label:"Current Password",placeholder:"",help:"Your current password",visible:z,required:!0},{name:"passwordNew",type:"secret",autoComplete:"new-password",label:"New Password",placeholder:"",help:"",required:!0,visible:z,validate:function(t){var e=t.id,n=t.form;return n[e]!==n.passwordVerify?[[e,""]]:[]}},{name:"passwordVerify",type:"secret",autoComplete:"new-password",label:"Verify New Password",placeholder:"",help:"Verify your new password",required:!0,visible:z,validate:function(t){var e=t.id,n=t.form;return n.passwordNew&&n.passwordNew!==n[e]?[[e,"Passwords do not match"]]:[]}}]}],F=n(0);function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(L()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;s()(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(t=n.call.apply(n,[this].concat(a))).handleSubmitSuccess=function(t,e){e.resetForm(),Object(g.d)("Password has been changed")},t.handleSubmitError=function(){Object(g.a)("Error changing password")},t}return u()(r,[{key:"render",value:function(){var t=D.default.get("user");return Object(F.f)(P.a,{apiMethod:"PUT",apiEndpoint:"/users/me/password/",initialData:{},onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,hideFooter:!0},Object(F.f)(E.a,{location:this.props.location,forms:T,additionalFieldProps:{user:t},renderFooter:function(){return Object(F.f)(y.f,{justifyContent:"flex-end"},Object(F.f)(q.a,{type:"submit",priority:"primary"},Object(w.b)("Change password")))},renderHeader:function(){return Object(F.f)(y.b,{type:"info"},Object(w.b)("Changing your password will invalidate all logged in sessions."))}}))}}]),r}(m.a.Component);B.displayName="PasswordForm";var I=B,V=n(1961),H=n(1588),J=n(620),M=n(39),W=n(80),Y=n(79),U=n(8),G=n(2102),K=Object(v.a)(W.b,{target:"eflczvm0",label:"StyledAlert"})("margin:",Object(U.a)(3)," 0;"),Q=function(){return Object(G.a)()?Object(F.f)(K,{"data-test-id":"require-2fa",type:"error",icon:Object(F.f)(R.C,{size:"md"})},Object(w.c)("You have been invited to an organization that requires [link:two-factor authentication]. Setup two-factor authentication below to join your organization.",{link:Object(F.f)(Y.a,{href:"https://docs.sentry.io/accounts/require-2fa/"})})):null},X=n(1599);function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var $=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(Z()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;s()(this,r);for(var e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return(t=n.call.apply(n,[this].concat(i))).handleSessionClose=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.requestPromise("/auth/",{method:"DELETE",data:{all:!0}});case 3:window.location.assign("/auth/login/"),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),Object(g.a)(Object(w.b)("There was a problem closing all sessions")),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),t.formatOrgSlugs=function(){var e=t.props.orgsRequire2fa.map((function(t){return t.slug}));return[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length>1?" and ":"")},t}return u()(r,[{key:"getTitle",value:function(){return Object(w.b)("Security")}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var t=this,e=this.props,n=e.authenticators,r=e.countEnrolled,a=e.deleteDisabled,i=e.onDisable,o=!(null==n?void 0:n.length);return Object(F.f)("div",null,Object(F.f)(H.a,{title:Object(w.b)("Security"),tabs:Object(F.f)(C.a,{underlined:!0},Object(F.f)(A.a,{to:Object(X.a)("",this.props),index:!0},Object(w.b)("Settings")),Object(F.f)(A.a,{to:Object(X.a)("session-history/",this.props)},Object(w.b)("Session History")))}),!o&&0===r&&Object(F.f)(Q,null),Object(F.f)(I,null),Object(F.f)(y.a,null,Object(F.f)(y.e,null,Object(w.b)("Sessions")),Object(F.f)(y.c,null,Object(F.f)(x.a,{alignRight:!0,flexibleControlStateSize:!0,label:Object(w.b)("Sign out of all devices"),help:Object(w.b)("Signing out of all devices will sign you out of this device as well.")},Object(F.f)(q.a,{"data-test-id":"signoutAll",onClick:this.handleSessionClose},Object(w.b)("Sign out of all devices"))))),Object(F.f)(y.a,null,Object(F.f)(y.e,null,Object(w.b)("Two-Factor Authentication")),o&&Object(F.f)(k.a,null,Object(w.b)("No available authenticators to add")),Object(F.f)(y.c,null,!o&&(null==n?void 0:n.map((function(e){var n=e.id,r=e.authId,o=e.description,c=e.isBackupInterface,s=e.isEnrolled,l=e.configureButton,u=e.name;return Object(F.f)(tt,{key:n},Object(F.f)(et,null,Object(F.f)(nt,null,Object(F.f)(at,{enabled:s}),Object(F.f)(_,null,u)),Object(F.f)(rt,null,!c&&!s&&Object(F.f)(q.a,{to:"/settings/account/security/mfa/".concat(n,"/enroll/"),size:"small",priority:"primary",className:"enroll-button"},Object(w.b)("Add")),s&&r&&Object(F.f)(q.a,{to:"/settings/account/security/mfa/".concat(r,"/"),size:"small",className:"details-button"},l),!c&&s&&Object(F.f)(M.a,{title:Object(w.b)("Two-factor authentication is required for organization(s): ".concat(t.formatOrgSlugs(),".")),disabled:!a},Object(F.f)(V.a,{onConfirm:function(){return i(e)},disabled:a},Object(F.f)(q.a,{size:"small",label:Object(w.b)("delete"),icon:Object(F.f)(R.s,null)})))),c&&!s?Object(w.b)("requires 2FA"):null),Object(F.f)(it,null,o))}))))))}}]),r}(S.a),_=Object(v.a)("span",{target:"ekt5q3n0",label:"AuthenticatorName"})({name:"1x1uhd2",styles:"font-size:1.2em;"}),tt=Object(v.a)(y.f,{target:"ekt5q3n1",label:"AuthenticatorPanelItem"})({name:"cgq59l",styles:"flex-direction:column;"}),et=Object(v.a)("div",{target:"ekt5q3n2",label:"AuthenticatorHeader"})({name:"14oqdsi",styles:"display:flex;flex:1;align-items:center;"}),nt=Object(v.a)("div",{target:"ekt5q3n3",label:"AuthenticatorTitle"})({name:"1rr4qq7",styles:"flex:1;"}),rt=Object(v.a)("div",{target:"ekt5q3n4",label:"Actions"})("display:grid;grid-auto-flow:column;grid-gap:",Object(U.a)(1),";"),at=Object(v.a)(N.a,{target:"ekt5q3n5",label:"AuthenticatorStatus"})("margin-right:",Object(U.a)(1),";"),it=Object(v.a)(J.a,{target:"ekt5q3n6",label:"Description"})("margin-top:",Object(U.a)(2),";margin-bottom:0;");e.default=$}}]);
//# sourceMappingURL=AccountSecurity.js.map