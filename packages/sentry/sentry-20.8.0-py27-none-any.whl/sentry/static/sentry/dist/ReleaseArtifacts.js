(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[182],{1634:function(t,e,n){"use strict";n(1);var a=n(25),i=n(329),r=n(0);function c(t){var e=t.className,n=t.bytes;return Object(r.f)("span",{className:e},Object(i.a)({value:Object(a.j)(n),fixed:"xx KB"}))}c.displayName="FileSize",e.a=c},1694:function(t,e,n){"use strict";var a=n(5),i=n.n(a),r=n(15),c=n.n(r),s=n(9),l=n.n(s),o=n(10),f=n.n(o),u=n(11),b=n.n(u),d=n(12),p=n.n(d),j=n(6),h=n.n(j),O=n(1),m=n.n(O),y=n(46),v=n.n(y),g=n(279),R=n(0);function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var x=function(t){b()(a,t);var e,n=(e=a,function(){var t,n=h()(e);if(w()){var a=h()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return p()(this,t)});function a(){return l()(this,a),n.apply(this,arguments)}return f()(a,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.disabled,a=t.title,r=t.children,s=c()(t,["className","disabled","title","children"]);return Object(R.f)(g.a,i()({},s,{disabled:n}),Object(R.f)("a",{href:"#",className:v()(e||"",{disabled:n}),title:a},r))}}]),a}(m.a.PureComponent);x.displayName="LinkWithConfirmation",e.a=x},2223:function(t,e,n){"use strict";n.r(e),n.d(e,"ReleaseArtifacts",(function(){return P}));var a=n(30),i=n.n(a),r=n(9),c=n.n(r),s=n(10),l=n.n(s),o=n(11),f=n.n(o),u=n(12),b=n.n(u),d=n(6),p=n.n(d),j=n(4),h=n(1),O=n.n(h),m=n(182),y=n.n(m),v=n(277),g=n(74),R=n(31),w=n(3),x=n(29),k=n(378),z=n(1634),L=n(1694),N=n(183),D=n(50),S=n(619),C=n(56),E=n(78),A=n(8),q=n(17),F=n(0);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var P=function(t){f()(a,t);var e,n=(e=a,function(){var t,n=p()(e);if(I()){var a=p()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return b()(this,t)});function a(){var t;return c()(this,a),(t=n.call(this)).fetchData=function(){t.setState({loading:!0,error:!1}),t.props.api.request(t.getFilesEndpoint(),{method:"GET",data:y()(t.props.location.query,[].concat(i()(Object.values(g.e)),["query"])),success:function(e,n,a){t.setState({error:!1,loading:!1,fileList:e,pageLinks:a.getResponseHeader("Link")})},error:function(){t.setState({error:!0,loading:!1})}})},t.state={loading:!0,error:!1,fileList:[],pageLinks:null},t}return l()(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getFilesEndpoint",value:function(){var t=this.props.params,e=t.orgId,n=t.projectId,a=t.release,i=encodeURIComponent(a),r=null!=n?n:this.props.projectId;return r?"/projects/".concat(e,"/").concat(r,"/releases/").concat(i,"/files/"):"/organizations/".concat(e,"/releases/").concat(i,"/files/")}},{key:"handleRemove",value:function(t){var e=this;Object(R.b)(Object(w.b)("Removing artifactâ€¦")),this.props.api.request(this.getFilesEndpoint()+"".concat(t,"/"),{method:"DELETE",success:function(){var n=e.state.fileList.filter((function(e){return e.id!==t}));e.setState({fileList:n}),Object(R.d)(Object(w.b)("Artifact removed."))},error:function(){Object(R.a)(Object(w.b)("Unable to remove artifact. Please try again."))}})}},{key:"render",value:function(){var t=this;if(this.state.loading)return Object(F.f)(D.default,null);if(this.state.error)return Object(F.f)(N.a,{onRetry:this.fetchData});if(0===this.state.fileList.length)return Object(F.f)(v.a,null,Object(F.f)(v.c,null,Object(F.f)(k.a,{small:this.props.smallEmptyMessage},Object(F.f)("p",null,Object(w.b)("There are no artifacts uploaded for this release.")))));var e=new Set(this.props.organization.access);return Object(F.f)("div",null,Object(F.f)(v.a,null,Object(F.f)(v.e,null,Object(F.f)(T,null,Object(w.b)("Name")),Object(F.f)(U,null,Object(w.b)("Distribution")),Object(F.f)(W,null,Object(w.b)("Size"))),Object(F.f)(v.c,null,this.state.fileList.map((function(n){return Object(F.f)(v.f,{key:n.id},Object(F.f)(T,null,Object(F.f)("strong",null,n.name||"(empty)")),Object(F.f)(U,null,n.dist||Object(F.f)("span",{className:"text-light"},Object(w.b)("None"))),Object(F.f)(W,null,Object(F.f)(z.a,{bytes:n.size}),Object(F.f)(J,null,e.has("project:write")?Object(F.f)(x.a,{"data-test-id":"artifact-download",href:t.props.api.baseUrl+t.getFilesEndpoint()+"".concat(n.id,"/?download=1"),size:"small",icon:Object(F.f)(q.cb,{size:"xs"})}):Object(F.f)(x.a,{"data-test-id":"artifact-download",title:Object(w.b)("You do not have the required permission to download this artifact."),disabled:!0,size:"small",icon:Object(F.f)(q.cb,{size:"xs"})}),Object(F.f)("div",{style:{marginLeft:5}},Object(F.f)(L.a,{className:"btn btn-sm btn-default",title:Object(w.b)("Delete artifact"),message:Object(w.b)("Are you sure you want to remove this artifact?"),onConfirm:t.handleRemove.bind(t,n.id)},Object(F.f)(q.s,null))))))})))),Object(F.f)(S.a,{pageLinks:this.state.pageLinks}))}}]),a}(O.a.Component);P.displayName="ReleaseArtifacts";var T=Object(j.a)("div",{target:"e9h6amz0",label:"NameColumn"})("display:flex;flex:7;padding-right:",Object(A.a)(2),";word-wrap:break-word;word-break:break-all;"),U=Object(j.a)("div",{target:"e9h6amz1",label:"DistributionColumn"})("display:flex;flex:2;padding-right:",Object(A.a)(2),";"),W=Object(j.a)("div",{target:"e9h6amz2",label:"SizeAndActionsColumn"})({name:"8if6xy",styles:"display:flex;flex:3;justify-content:space-between;"}),J=Object(j.a)("div",{target:"e9h6amz3",label:"AlignCenter"})({name:"70qvj9",styles:"display:flex;align-items:center;"});e.default=Object(E.a)(Object(C.a)(P))}}]);
//# sourceMappingURL=ReleaseArtifacts.js.map