{"version":3,"sources":["webpack:///./app/components/commitRow.tsx","webpack:///./app/components/commitLink.tsx","webpack:///./app/components/well.tsx","webpack:///./app/styles/overflowEllipsisLeft.tsx","webpack:///./app/views/releasesV2/detail/releaseNoCommitData.tsx","webpack:///./app/views/releasesV2/detail/commits/index.tsx"],"names":["CommitRow","message","split","t","author","EmailWarning","tct","actorEmail","email","accountSettings","StyledLink","to","inviteUser","onClick","openInviteMembersModal","initialData","emails","Set","source","this","props","commit","customAvatar","id","dateCreated","repository","nonMemberEmail","undefined","key","AvatarWrapper","body","renderHovercardBody","size","user","EmailWarningIcon","CommitMessage","Message","renderMessage","Meta","name","timeago","date","commitId","React","Component","space","p","theme","fontSizeSmall","Link","textColor","IconFlag","white","yellow300","TextOverflow","gray600","SUPPORTED_PROVIDERS","icon","providerIds","commitUrl","baseUrl","CommitLink","inline","shortId","getShortCommitHash","providerData","find","provider","includes","url","className","href","external","Well","borderLight","gray100","hasImage","centered","propTypes","PropTypes","bool","ReleaseNoCommitData","orgId","StyledWell","priority","ALL_REPOSITORIES_LABEL","ReleaseCommits","handleRepoFilterChange","repo","setState","activeRepo","params","organization","routeTitleGen","formatVersion","release","slug","project","context","encodeURIComponent","commitsByRepository","repos","Object","keys","state","RepoSwitcher","label","Fragment","FilterText","map","repoName","onSelect","eventKey","isActive","RepoLabel","commits","getCommitsByRepository","reposToRender","length","small","renderRepoSwitcher","renderCommitsForRepo","fullWidth","AsyncView","contextType","ReleaseContext","gray500","overflowEllipsisLeft","withOrganization"],"mappings":"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","file":"ReleasesV2DetailCommits.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from '@emotion/styled';\n\nimport {Commit} from 'app/types';\nimport {openInviteMembersModal} from 'app/actionCreators/modal';\nimport {PanelItem} from 'app/components/panels';\nimport {t, tct} from 'app/locale';\nimport UserAvatar from 'app/components/avatar/userAvatar';\nimport CommitLink from 'app/components/commitLink';\nimport Hovercard from 'app/components/hovercard';\nimport {IconFlag} from 'app/icons';\nimport Link from 'app/components/links/link';\nimport TextOverflow from 'app/components/textOverflow';\nimport TimeSince from 'app/components/timeSince';\nimport space from 'app/styles/space';\n\ntype Props = {\n  commit: Commit;\n  customAvatar?: React.ReactNode;\n};\n\nclass CommitRow extends React.Component<Props> {\n  static propTypes = {\n    commit: PropTypes.object,\n    customAvatar: PropTypes.node,\n  };\n\n  renderMessage(message: string): string {\n    if (!message) {\n      return t('No message provided');\n    }\n\n    const firstLine = message.split(/\\n/)[0];\n\n    return firstLine;\n  }\n\n  renderHovercardBody(author) {\n    return (\n      <EmailWarning>\n        {tct(\n          'The email [actorEmail] is not a member of your organization. [inviteUser:Invite] them or link additional emails in [accountSettings:account settings].',\n          {\n            actorEmail: <strong>{author.email}</strong>,\n            accountSettings: <StyledLink to=\"/settings/account/emails/\" />,\n            inviteUser: (\n              <StyledLink\n                to=\"\"\n                onClick={() =>\n                  openInviteMembersModal({\n                    initialData: [\n                      {\n                        emails: new Set([author.email]),\n                      },\n                    ],\n                    source: 'suspect_commit',\n                  })\n                }\n              />\n            ),\n          }\n        )}\n      </EmailWarning>\n    );\n  }\n\n  render() {\n    const {commit, customAvatar, ...props} = this.props;\n    const {id, dateCreated, message, author, repository} = commit;\n    const nonMemberEmail = author && author.id === undefined;\n\n    return (\n      <PanelItem key={id} {...props}>\n        {customAvatar ? (\n          customAvatar\n        ) : nonMemberEmail ? (\n          <AvatarWrapper>\n            <Hovercard body={this.renderHovercardBody(author)}>\n              <UserAvatar size={36} user={author} />\n              <EmailWarningIcon />\n            </Hovercard>\n          </AvatarWrapper>\n        ) : (\n          <AvatarWrapper>\n            <UserAvatar size={36} user={author} />\n          </AvatarWrapper>\n        )}\n\n        <CommitMessage>\n          <Message>{this.renderMessage(message)}</Message>\n          <Meta>\n            {tct('[author] committed [timeago]', {\n              author: <strong>{(author && author.name) || t('Unknown author')}</strong>,\n              timeago: <TimeSince date={dateCreated} />,\n            })}\n          </Meta>\n        </CommitMessage>\n\n        <div>\n          <CommitLink commitId={id} repository={repository} />\n        </div>\n      </PanelItem>\n    );\n  }\n}\n\nconst AvatarWrapper = styled('div')`\n  align-self: flex-start;\n  margin-right: ${space(2)};\n`;\n\nconst EmailWarning = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  line-height: 1.4;\n  margin: -4px;\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${p => p.theme.textColor};\n  border-bottom: 1px dotted ${p => p.theme.textColor};\n\n  &:hover {\n    color: ${p => p.theme.textColor};\n  }\n`;\n\nconst EmailWarningIcon = styled(IconFlag)`\n  position: relative;\n  margin-left: -11px;\n  border-radius: 11px;\n  margin-bottom: -25px;\n  border: 1px solid ${p => p.theme.white};\n  background: ${p => p.theme.yellow300};\n`;\n\nconst CommitMessage = styled('div')`\n  flex: 1;\n  flex-direction: column;\n  min-width: 0;\n  margin-right: ${space(2)};\n`;\n\nconst Message = styled(TextOverflow)`\n  font-size: 15px;\n  line-height: 1.1;\n  font-weight: bold;\n`;\n\nconst Meta = styled(TextOverflow)`\n  font-size: 13px;\n  line-height: 1.5;\n  margin: 0;\n  color: ${p => p.theme.gray600};\n`;\n\nexport default styled(CommitRow)`\n  align-items: center;\n`;\n","import React from 'react';\n\nimport {Repository} from 'app/types';\nimport {t} from 'app/locale';\nimport {getShortCommitHash} from 'app/utils';\nimport Button from 'app/components/button';\nimport {IconBitbucket, IconGithub, IconGitlab, IconVsts} from 'app/icons';\nimport ExternalLink from 'app/components/links/externalLink';\n\ntype CommitFormatterParameters = {\n  baseUrl: string;\n  commitId: string;\n};\n\ntype CommitProvider = {\n  icon: React.ReactNode;\n  providerIds: string[];\n  commitUrl: (CommitFormatterParameters) => string;\n};\n\n// TODO(epurkhiser, jess): This should be moved into plugins.\nconst SUPPORTED_PROVIDERS: Readonly<CommitProvider[]> = [\n  {\n    icon: <IconGithub size=\"xs\" />,\n    providerIds: ['github', 'integrations:github', 'integrations:github_enterprise'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n  {\n    icon: <IconBitbucket size=\"xs\" />,\n    providerIds: ['bitbucket', 'integrations:bitbucket'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commits/${commitId}`,\n  },\n  {\n    icon: <IconVsts size=\"xs\" />,\n    providerIds: ['visualstudio', 'integrations:vsts'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n  {\n    icon: <IconGitlab size=\"xs\" />,\n    providerIds: ['gitlab', 'integrations:gitlab'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n];\n\ntype Props = {\n  commitId: string;\n  repository?: Repository;\n  inline?: boolean;\n};\n\nfunction CommitLink({inline, commitId, repository}: Props) {\n  if (!commitId || !repository) {\n    return <span>{t('Unknown Commit')}</span>;\n  }\n\n  const shortId = getShortCommitHash(commitId);\n\n  const providerData = SUPPORTED_PROVIDERS.find(provider => {\n    if (!repository.provider) {\n      return false;\n    }\n    return provider.providerIds.includes(repository.provider.id);\n  });\n\n  if (providerData === undefined) {\n    return <span>{shortId}</span>;\n  }\n\n  const commitUrl =\n    repository.url &&\n    providerData.commitUrl({\n      commitId,\n      baseUrl: repository.url,\n    });\n\n  return !inline ? (\n    <Button external href={commitUrl} size=\"small\" icon={providerData.icon}>\n      {shortId}\n    </Button>\n  ) : (\n    <ExternalLink className=\"inline-commit\" href={commitUrl}>\n      {providerData.icon}\n      {' ' + shortId}\n    </ExternalLink>\n  );\n}\n\nexport default CommitLink;\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport PropTypes from 'prop-types';\n\ntype Props = {\n  hasImage?: boolean;\n  centered?: boolean;\n  children: React.ReactNode;\n  theme?: any;\n};\n\ntype WellProps = Omit<React.HTMLProps<HTMLDivElement>, keyof Props> & Props;\n\nconst Well = styled('div')<WellProps>`\n  border: 1px solid ${p => p.theme.borderLight};\n  box-shadow: none;\n  background: ${p => p.theme.gray100};\n  padding: ${p => (p.hasImage ? '80px 30px' : '15px 20px')};\n  margin-bottom: 20px;\n  border-radius: 3px;\n  ${p => p.centered && 'text-align: center'};\n`;\n\nWell.propTypes = {\n  hasImage: PropTypes.bool,\n  centered: PropTypes.bool,\n};\n\nexport default Well;\n","export default `\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  direction: rtl;\n  text-align: left;\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport Button from 'app/components/button';\nimport Well from 'app/components/well';\nimport {IconCommit} from 'app/icons';\n\ntype Props = {\n  orgId: string;\n};\n\nconst ReleaseNoCommitData = ({orgId}: Props) => (\n  <StyledWell centered>\n    <IconCommit size=\"xl\" />\n    <h4>{t('Releases are better with commit data!')}</h4>\n    <p>\n      {t(\n        'Connect a repository to see commit info, files changed, and authors involved in future releases.'\n      )}\n    </p>\n    <Button priority=\"primary\" to={`/settings/${orgId}/repos/`}>\n      {t('Connect a repository')}\n    </Button>\n  </StyledWell>\n);\n\nconst StyledWell = styled(Well)`\n  background-color: ${p => p.theme.white};\n  padding-top: ${space(2)};\n  padding-bottom: ${space(4)};\n`;\n\nexport default ReleaseNoCommitData;\n","import React from 'react';\nimport {RouteComponentProps} from 'react-router/lib/Router';\nimport styled from '@emotion/styled';\n\nimport AsyncComponent from 'app/components/asyncComponent';\nimport CommitRow from 'app/components/commitRow';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Repository, Commit, Organization} from 'app/types';\nimport EmptyStateWarning from 'app/components/emptyStateWarning';\nimport {PanelHeader, Panel, PanelBody} from 'app/components/panels';\nimport DropdownControl, {DropdownItem} from 'app/components/dropdownControl';\nimport overflowEllipsisLeft from 'app/styles/overflowEllipsisLeft';\nimport AsyncView from 'app/views/asyncView';\nimport routeTitleGen from 'app/utils/routeTitle';\nimport {formatVersion} from 'app/utils/formatters';\nimport withOrganization from 'app/utils/withOrganization';\nimport {Main} from 'app/components/layouts/thirds';\n\nimport {getCommitsByRepository, CommitsByRepository} from '../utils';\nimport ReleaseNoCommitData from '../releaseNoCommitData';\nimport {ReleaseContext} from '../';\n\nconst ALL_REPOSITORIES_LABEL = t('All Repositories');\n\ntype RouteParams = {\n  orgId: string;\n  release: string;\n};\n\ntype Props = RouteComponentProps<RouteParams, {}> & {\n  organization: Organization;\n};\n\ntype State = {\n  commits: Commit[];\n  repos: Repository[];\n  activeRepo: string;\n} & AsyncComponent['state'];\n\nclass ReleaseCommits extends AsyncView<Props, State> {\n  static contextType = ReleaseContext;\n\n  getTitle() {\n    const {params, organization} = this.props;\n    return routeTitleGen(\n      t('Commits - Release %s', formatVersion(params.release)),\n      organization.slug,\n      false\n    );\n  }\n\n  getDefaultState() {\n    return {\n      ...super.getDefaultState(),\n      activeRepo: ALL_REPOSITORIES_LABEL,\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {params} = this.props;\n    const {orgId, release} = params;\n\n    const {project} = this.context;\n\n    return [\n      [\n        'commits',\n        `/projects/${orgId}/${project.slug}/releases/${encodeURIComponent(\n          release\n        )}/commits/`,\n      ],\n      ['repos', `/organizations/${orgId}/repos/`],\n    ];\n  }\n\n  handleRepoFilterChange = (repo: string) => {\n    this.setState({activeRepo: repo});\n  };\n\n  renderRepoSwitcher(commitsByRepository: CommitsByRepository) {\n    const repos = Object.keys(commitsByRepository);\n    const {activeRepo} = this.state;\n\n    return (\n      <RepoSwitcher>\n        <DropdownControl\n          label={\n            <React.Fragment>\n              <FilterText>{t('Filter')}: &nbsp; </FilterText>\n              {activeRepo}\n            </React.Fragment>\n          }\n        >\n          {[ALL_REPOSITORIES_LABEL, ...repos].map(repoName => (\n            <DropdownItem\n              key={repoName}\n              onSelect={this.handleRepoFilterChange}\n              eventKey={repoName}\n              isActive={repoName === activeRepo}\n            >\n              <RepoLabel>{repoName}</RepoLabel>\n            </DropdownItem>\n          ))}\n        </DropdownControl>\n      </RepoSwitcher>\n    );\n  }\n\n  renderCommitsForRepo(repo: string, commitsByRepository: CommitsByRepository) {\n    return (\n      <Panel key={repo}>\n        <PanelHeader>{repo}</PanelHeader>\n        <PanelBody>\n          {commitsByRepository[repo].map(commit => (\n            <CommitRow key={commit.id} commit={commit} />\n          ))}\n        </PanelBody>\n      </Panel>\n    );\n  }\n\n  renderBody() {\n    const {orgId} = this.props.params;\n    const {commits, repos, activeRepo} = this.state;\n\n    const commitsByRepository = getCommitsByRepository(commits);\n    const reposToRender =\n      activeRepo === ALL_REPOSITORIES_LABEL\n        ? Object.keys(commitsByRepository)\n        : [activeRepo];\n\n    if (repos.length === 0) {\n      return <ReleaseNoCommitData orgId={orgId} />;\n    }\n\n    if (commits.length === 0) {\n      return (\n        <Panel>\n          <PanelBody>\n            <EmptyStateWarning small>\n              {t('There are no commits associated with this release.')}\n            </EmptyStateWarning>\n          </PanelBody>\n        </Panel>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {Object.keys(commitsByRepository).length > 1 &&\n          this.renderRepoSwitcher(commitsByRepository)}\n        {reposToRender.map(repoName =>\n          this.renderCommitsForRepo(repoName, commitsByRepository)\n        )}\n      </React.Fragment>\n    );\n  }\n\n  renderComponent() {\n    return <Main fullWidth>{super.renderComponent()}</Main>;\n  }\n}\n\nconst RepoSwitcher = styled('div')`\n  margin-bottom: ${space(1)};\n`;\n\nconst FilterText = styled('em')`\n  font-style: normal;\n  color: ${p => p.theme.gray500};\n`;\n\nconst RepoLabel = styled('div')`\n  ${overflowEllipsisLeft}\n`;\n\nexport default withOrganization(ReleaseCommits);\n"],"sourceRoot":""}