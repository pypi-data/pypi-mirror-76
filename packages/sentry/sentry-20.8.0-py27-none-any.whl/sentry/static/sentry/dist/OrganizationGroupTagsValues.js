(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[119],{1639:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return S}));var a=n(21),r=n.n(a),i=n(9),o=n.n(i),c=n(10),s=n.n(c),u=n(11),l=n.n(u),f=n(12),d=n.n(f),p=n(6),b=n.n(p),y=n(26),h=n.n(y),v=n(1),g=n.n(v),j=n(0);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t,e){var n=t.split(" ")[0],a=t.split(" ").splice(1).join(" "),r=e.generationByIdentifier(n);return void 0===r?t:r+" "+a}function w(){return x.apply(this,arguments)}function x(){return(x=h()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.e(213).then(n.t.bind(null,1854,7)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(t){l()(a,t);var e,n=(e=a,function(){var t,n=b()(e);if(O()){var a=b()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return d()(this,t)});function a(t){var e;return o()(this,a),(e=n.call(this,t))._isMounted=void 0,e.state={iOSDeviceList:null},e}return s()(a,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,w().then((function(e){t._isMounted&&t.setState({iOSDeviceList:e})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.value,n=t.children,a=this.state.iOSDeviceList;if(!e)return null;if(!a)return e;var r=m(e,a);return Object(j.f)("span",{"data-test-id":"loaded-device-name"},n?n(r):r)}}]),a}(g.a.Component);S.displayName="DeviceName"},1925:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a,r=n(15),i=n.n(r),o=n(5),c=n.n(o),s=n(41),u=n.n(s),l=n(9),f=n.n(l),d=n(10),p=n.n(d),b=n(11),y=n.n(b),h=n(12),v=n.n(h),g=n(6),j=n.n(g),O=n(126),m=n.n(O),w=n(57),x=n.n(w),S=n(1),k=n.n(S),D=n(31),R=n(184),q=n(29),P=n(3),N=n(56),z=n(391),L=n(78),T=n(0);function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}
//! Coordinate with other ExportQueryType (src/sentry/data_export/base.py)
!function(t){t.IssuesByTag="Issues-by-Tag",t.Discover="Discover"}(a||(a={}));var I=function(t){y()(a,t);var e,n=(e=a,function(){var t,n=j()(e);if(E()){var a=j()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return v()(this,t)});function a(){var t;f()(this,a);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).state=t.initialState,t.resetState=function(){t.setState(t.initialState)},t.startDataExport=function(){var e=t.props,n=e.api,a=e.organization.slug,r=e.payload,i=r.queryType,o=r.queryInfo;t.setState({inProgress:!0}),n.requestPromise("/organizations/".concat(a,"/data-export/"),{includeAllArgs:!0,method:"POST",data:{query_type:i,query_info:o}}).then((function(t){var e=u()(t,3),n=(e[0],e[1],e[2]);Object(D.d)(201===(null==n?void 0:n.status)?Object(P.b)("Sit tight. We'll shoot you an email when your data is ready for download."):Object(P.b)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((function(e){var n,a,r=null!==(n=null==e?void 0:null===(a=e.responseJSON)||void 0===a?void 0:a.detail)&&void 0!==n?n:"We tried our hardest, but we couldn't export your data. Give it another go.";Object(D.a)(Object(P.b)(r)),t.setState({inProgress:!1})}))},t}return p()(a,[{key:"componentDidUpdate",value:function(t){var e=t.payload,n=this.props.payload;x()(e,n)||this.resetState()}},{key:"render",value:function(){var t=this.state.inProgress,e=this.props,n=e.children,a=e.disabled,r=e.icon;return Object(T.f)(R.a,{features:["organizations:discover-query"]},t?Object(T.f)(V,c()({size:"small",priority:"default",title:"You can get on with your life. We'll email you when your data's ready."},this.props,{disabled:!0,icon:r}),Object(P.b)("We're working on it...")):Object(T.f)(V,c()({onClick:m()(this.startDataExport,500),disabled:a||!1,size:"small",priority:"default",title:"Put your data to work. Start your export and we'll email you when it's finished.",icon:r},this.props),n||Object(P.b)("Export All to CSV")))}},{key:"initialState",get:function(){return{inProgress:!1}}}]),a}(k.a.Component);I.displayName="DataExport";var V=function(t){var e=t.children,n=i()(t,["children"]);return Object(T.f)(q.a,n,e,Object(T.f)(z.a,{type:"new",noTooltip:!0}))};V.displayName="NewButton",e.b=Object(N.a)(Object(L.a)(I))},2770:function(t,e,n){"use strict";n.r(e),n.d(e,"GroupTagValues",(function(){return B}));var a=n(9),r=n.n(a),i=n(10),o=n.n(i),c=n(11),s=n.n(c),u=n(12),l=n.n(u),f=n(6),d=n.n(f),p=n(4),b=n(493),y=n.n(b),h=n(899),v=n.n(h),g=n(1),j=n.n(g),O=n(25),m=n(3),w=n(1587),x=n(679),S=n(29),k=n(162),D=n(1639),R=n(79),q=n(387),P=n(17),N=n(430),z=n(619),L=n(249),T=n(1925),E=n(8),I=n(0);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){s()(a,t);var e,n=(e=a,function(){var t,n=d()(e);if(V()){var a=d()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return l()(this,t)});function a(){return r()(this,a),n.apply(this,arguments)}return o()(a,[{key:"getEndpoints",value:function(){var t=this.props.environments,e=this.props.params,n=e.groupId,a=e.tagKey;return[["tag","/issues/".concat(n,"/tags/").concat(a,"/")],["tagValueList","/issues/".concat(n,"/tags/").concat(a,"/values/"),{query:{environment:t}}]]}},{key:"renderBody",value:function(){var t=this.props,e=t.group,n=t.params,a=n.orgId,r=n.tagKey,i=t.environments,o=this.state,c=o.tag,s=o.tagValueList,u=o.tagValueListPageLinks,l=y()(s,v()("count")).reverse();if(0===l.length&&i.length>0)return Object(I.f)(N.a,{heading:Object(m.b)("Sorry, the tags for this issue could not be found."),message:Object(m.b)("No tags were found for the currently selected environments")});var f="/organizations/".concat(a,"/issues/"),d=l.map((function(t,e){var n=c.totalValues?"".concat(Object(O.t)(t.count,c.totalValues).toFixed(2),"%"):"--",a=t.query||"".concat(c.key,':"').concat(t.value,'"');return Object(I.f)("tr",{key:e},Object(I.f)("td",{className:"bar-cell"},Object(I.f)("span",{className:"label"},n)),Object(I.f)("td",null,Object(I.f)(H,null,Object(I.f)(q.a,{to:{pathname:f,query:{query:a}}},"user"===c.key?Object(I.f)(x.a,{user:t,avatarSize:20,hideEmail:!0}):Object(I.f)(D.a,{value:t.name})),t.email&&Object(I.f)(U,{href:"mailto:".concat(t.email)},Object(I.f)(P.U,{size:"xs",color:"gray500"})),Object(O.o)(t.value)&&Object(I.f)(U,{href:t.value},Object(I.f)(P.cb,{size:"xs",color:"gray500"})))),Object(I.f)("td",null,Object(I.f)(L.a,{date:t.lastSeen})))}));return Object(I.f)(j.a.Fragment,null,Object(I.f)(W,null,Object(I.f)(_,null,"user"===c.key?Object(m.b)("Affected Users"):c.name),Object(I.f)(A,{gap:1},Object(I.f)(C,{size:"small",priority:"default",href:"/".concat(a,"/").concat(e.project.slug,"/issues/").concat(e.id,"/tags/").concat(r,"/export/")},Object(m.b)("Export Page to CSV")),Object(I.f)(T.b,{payload:{queryType:T.a.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:r}}}))),Object(I.f)("table",{className:"table table-striped"},Object(I.f)("thead",null,Object(I.f)("tr",null,Object(I.f)(M,{width:20},"%"),Object(I.f)("th",null),Object(I.f)(M,{width:300},Object(m.b)("Last Seen")))),Object(I.f)("tbody",null,d)),Object(I.f)(z.a,{pageLinks:u}),Object(I.f)("p",null,Object(I.f)("small",null,Object(m.b)("Note: Percentage of issue is based on events seen in the last 7 days."))))}}]),a}(w.a),W=Object(p.a)("div",{target:"ewx0sc40",label:"Header"})({name:"txxdff",styles:"display:flex;align-items:center;margin:0 0 20px;"}),_=Object(p.a)("h3",{target:"ewx0sc41",label:"HeaderTitle"})({name:"1uk1gs8",styles:"margin:0;"}),A=Object(p.a)(k.a,{target:"ewx0sc42",label:"HeaderButtons"})("align-items:stretch;margin:0px ",Object(E.a)(1.5),";"),C=Object(p.a)(S.a,{target:"ewx0sc43",label:"BrowserExportButton"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),M=Object(p.a)("th",{target:"ewx0sc44",label:"TableHeader"})("width:",(function(t){return t.width}),"px;"),H=Object(p.a)("div",{target:"ewx0sc45",label:"ValueWrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),U=Object(p.a)(R.a,{target:"ewx0sc46",label:"StyledExternalLink"})("margin-left:",Object(E.a)(.5),";");e.default=B}}]);
//# sourceMappingURL=OrganizationGroupTagsValues.js.map