(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[33],{2722:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return G}));var i=n(5),r=n.n(i),a=n(41),o=n.n(a),c=n(16),s=n.n(c),l=n(15),u=n.n(l),f=n(9),p=n.n(f),b=n(10),d=n.n(b),j=n(11),O=n.n(j),m=n(12),h=n.n(m),y=n(6),v=n.n(y),g=n(4),w=n(1),k=n.n(w),D=n(277),P=n(2101),N=n(3),F=n(1586),R=n(618),T=n(1603),z=n(1612),C=n(619),E=n(636),V=n(1588),B=n(620),S=n(312),A=n(0);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){return function(){var t,n=v()(e);if(W()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return h()(this,t)}}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I={alerts:{title:"Project Alerts",description:Object(N.b)("Control alerts that you receive per project."),type:"select",choices:[[-1,Object(N.b)("Default")],[1,Object(N.b)("On")],[0,Object(N.b)("Off")]],defaultValue:-1,defaultFieldName:"subscribeByDefault"},workflow:{title:"Workflow Notifications",description:Object(N.b)("Control workflow notifications, e.g. changes in issue assignment, resolution status, and comments."),type:"select",choices:[[-1,Object(N.b)("Default")],[0,Object(N.b)("Always")],[1,Object(N.b)("Only on issues I subscribe to")],[2,Object(N.b)("Never")]],defaultValue:-1,defaultFieldName:"workflowNotifications"},deploy:{title:Object(N.b)("Deploy Notifications"),description:Object(N.b)("Control deploy notifications that include release, environment, and commit overviews."),type:"select",choices:[[-1,Object(N.b)("Default")],[2,Object(N.b)("Always")],[3,Object(N.b)("Only on deploys with my commits")],[4,Object(N.b)("Never")]],defaultValue:-1,defaultFieldName:"deployNotifications"},reports:{title:Object(N.b)("Weekly Reports"),description:Object(N.b)("Reports contain a summary of what's happened within the organization."),type:"select",defaultValue:1,choices:[[1,Object(N.b)("On")],[0,Object(N.b)("Off")]],defaultFieldName:"weeklyReports"},email:{title:Object(N.b)("Email Routing"),description:Object(N.b)("On a per project basis, route emails to an alternative email address."),type:"select"}},J=Object(g.a)(D.c,{target:"e1n8sueq0",label:"PanelBodyLineItem"})("font-size:1.4rem;border-bottom:1px solid ",(function(e){return e.theme.borderLight}),";"),M=function(e){return["alerts","workflow","email"].indexOf(e)>-1};var U=function(e){O()(n,e);var t=L(n);function n(){return p()(this,n),t.apply(this,arguments)}return d()(n,[{key:"getFieldData",value:function(){var e=this.props,t=e.projects,n=e.field,i=function(e){return e.reduce((function(e,t){var n=t.organization.slug;return e.hasOwnProperty(n)?e[n].projects.push(t):e[n]={organization:t.organization,projects:[t]},e}),{})}(t),r=(n.title,n.description,u()(n,["title","description"]));return Object.values(i).map((function(e){return{name:e.organization.name,projects:e.projects.map((function(e){return x({},r,{name:e.id,label:e.slug})}))}}))}},{key:"render",value:function(){return this.getFieldData().map((function(e){var t=e.name,n=e.projects;return Object(A.f)("div",{key:t},Object(A.f)(D.e,null,t),n.map((function(e){return Object(A.f)(J,{key:e.name},Object(A.f)(E.a,{deprecatedSelectControl:!0,defaultValue:e.defaultValue,name:e.name,choices:e.choices,label:e.label}))})))}))}}]),n}(k.a.Component);U.displayName="AccountNotificationsByProject";var H=function(e){O()(n,e);var t=L(n);function n(){return p()(this,n),t.apply(this,arguments)}return d()(n,[{key:"getFieldData",value:function(){var e=this.props,t=e.field,n=e.organizations,i=(t.title,t.description,u()(t,["title","description"]));return n.map((function(e){return x({},i,{name:e.id,label:e.slug})}))}},{key:"render",value:function(){var e=this.getFieldData();return Object(A.f)(k.a.Fragment,null,e.map((function(e){return Object(A.f)(J,{key:e.name},Object(A.f)(E.a,{deprecatedSelectControl:!0,defaultValue:e.defaultValue,name:e.name,choices:e.choices,label:e.label}))})))}}]),n}(k.a.Component);H.displayName="AccountNotificationsByOrganization";var K=Object(S.a)(H),G=function(e){O()(n,e);var t=L(n);function n(){return p()(this,n),t.apply(this,arguments)}return d()(n,[{key:"getEndpoints",value:function(){var e=this.props.params.fineTuneType,t=[["notifications","/users/me/notifications/"],["fineTuneData","/users/me/notifications/".concat(e,"/")]];return M(e)&&t.push(["projects","/projects/"]),t.push(["emails","/users/me/emails/"]),"email"===e&&t.push(["emails","/users/me/emails/"]),t}},{key:"getEmailChoices",value:function(){var e=this.state.emails;return e?e.filter((function(e){return e.isVerified})).sort((function(e,t){return e.isPrimary?-1:t.isPrimary?1:e.email<t.email?-1:1})):[]}},{key:"renderBody",value:function(){var e=this.props.params.fineTuneType,t=M(e),n=I[e],i=n.title,a=n.description,c=t?this.getEndpoints()[2]:[],s=o()(c,2),l=s[0],u=s[1],f=this.state.projects&&!!this.state.projects.length;return"email"===e&&(n.choices=this.getEmailChoices().map((function(e){var t=e.email;return[t,t]}))),Object(A.f)("div",null,Object(A.f)(V.a,{title:i}),a&&Object(A.f)(B.a,null,a),n&&n.defaultFieldName&&"weeklyReports"!==n.defaultFieldName&&Object(A.f)(T.a,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/",initialData:this.state.notifications},Object(A.f)(z.a,{title:"Default ".concat(i),fields:[P.b[n.defaultFieldName]]})),Object(A.f)(D.a,null,Object(A.f)(D.c,null,Object(A.f)(D.e,{hasButtons:t},Object(A.f)(Q,null,t?Object(N.b)("Projects"):Object(N.b)("Organizations")),Object(A.f)("div",null,t&&this.renderSearchInput({placeholder:Object(N.b)("Search Projects"),url:u,stateKey:l}))),Object(A.f)(T.a,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/".concat(this.props.params.fineTuneType,"/"),initialData:this.state.fineTuneData},t&&f&&Object(A.f)(U,{projects:this.state.projects,field:n}),t&&!f&&Object(A.f)(R.a,null,Object(N.b)("No projects found")),!t&&Object(A.f)(K,{field:n})))),this.state.projects&&Object(A.f)(C.a,r()({pageLinks:this.state.projectsPageLinks},this.props)))}}]),n}(F.a),Q=Object(g.a)("div",{target:"e1n8sueq1",label:"Heading"})({name:"1rr4qq7",styles:"flex:1;"})}}]);
//# sourceMappingURL=AccountNotificationsFineTuning.js.map