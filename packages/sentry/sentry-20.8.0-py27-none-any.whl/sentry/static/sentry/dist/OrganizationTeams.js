(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[134],{1588:function(t,e,a){"use strict";var n=a(15),r=a.n(n),c=a(9),o=a.n(c),i=a(10),s=a.n(i),u=a(11),l=a.n(u),f=a(12),m=a.n(f),d=a(6),b=a.n(d),p=a(4),g=a(1),j=a.n(g),h=a(8),O=a(221),v=a(0);function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var T=function(t){l()(n,t);var e,a=(e=n,function(){var t,a=b()(e);if(y()){var n=b()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return m()(this,t)});function n(){return o()(this,n),a.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var t=this.props,e=t.icon,a=t.title,n=t.action,c=t.tabs,o=t.noTitleStyles,i=r()(t,["icon","title","action","tabs","noTitleStyles"]);return Object(v.f)("div",i,Object(v.f)(I,null,e&&Object(v.f)(S,null,e),a&&Object(v.f)(z,{tabs:c,styled:o},Object(v.f)(O.a,null,a)),n&&Object(v.f)(C,{tabs:c},n)),c&&Object(v.f)("div",null,c))}}]),n}(j.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var I=Object(p.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),z=Object(p.a)("div",{target:"e1uay4fd1",label:"Title"})((function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(t){return t.tabs?"".concat(Object(h.a)(4)," ").concat(Object(h.a)(2)," ").concat(Object(h.a)(2)," 0"):"".concat(Object(h.a)(4)," ").concat(Object(h.a)(2)," ").concat(Object(h.a)(4)," 0")}),";flex:1;"),S=Object(p.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(h.a)(1),";"),C=Object(p.a)("div",{target:"e1uay4fd3",label:"Action"})((function(t){return t.tabs?"margin-top: ".concat(Object(h.a)(2)):null}),";"),w=Object(p.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(h.a)(4),";");e.a=w},1598:function(t,e,a){"use strict";a(1);var n=a(278),r=a.n(n),c=a(0),o=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(c.f)(r.a,{title:e},t.children)};o.displayName="SentryDocumentTitle",e.a=o},1599:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a(629),r=a.n(n),c=a(484);function o(t,e){var a,n,o,i,s=e.routes,u=e.params,l=e.location,f=e.stepBack,m=s.map((function(t){return t.path||""}));"string"!=typeof t?(i=s.indexOf(t)+1,o=r()(m.slice(0,i),(function(t){return"/"===t[0]}))):o=r()(m,(function(t){return"/"===t[0]}));var d=m.slice(o,i);void 0!==f&&(d=d.slice(0,f));var b=null!==(a=null==l?void 0:l.search)&&void 0!==a?a:"",p=null!==(n=null==l?void 0:l.hash)&&void 0!==n?n:"",g="".concat(d.join("")).concat("string"!=typeof t?"":t).concat(b).concat(p);return Object(c.a)(g,u)}},1730:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"g",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"c",(function(){return f})),a.d(e,"d",(function(){return m})),a.d(e,"a",(function(){return d})),a.d(e,"e",(function(){return b}));var n=a(133),r=a(3),c=a(31),o=a(173),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if("function"==typeof t[e]){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];t[e].apply(t,n)}};function s(t,e,a){return n.a.fetchDetails(e.teamId),t.request("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{success:function(t){n.a.fetchDetailsSuccess(e.teamId,t),i(a,"success",t)},error:function(t){n.a.fetchDetailsError(e.teamId,t),i(a,"error",t)}})}function u(t,e){n.a.updateSuccess(t,e)}function l(t,e,a){var r="/teams/".concat(e.orgId,"/").concat(e.teamId,"/");return n.a.update(e.teamId,e.data),t.request(r,{method:"PUT",data:e.data,success:function(t){u(e.teamId,t),i(a,"success",t)},error:function(t){n.a.updateError(e.teamId,t),i(a,"error",t)}})}function f(t,e,a){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),c=Object(o.a)();return n.a.update(c,e.teamId),t.request(r,{method:"POST",data:e.data,success:function(t){n.a.updateSuccess(e.teamId,t),i(a,"success",t)},error:function(t){n.a.updateError(c,e.teamId,t),i(a,"error",t)}})}function m(t,e,a){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),c=Object(o.a)();return n.a.update(c,e.teamId),t.request(r,{method:"DELETE",success:function(t){n.a.updateSuccess(e.teamId,t),i(a,"success",t)},error:function(t){n.a.updateError(c,e.teamId,t),i(a,"error",t)}})}function d(t,e,a){return n.a.createTeam(e),t.requestPromise("/organizations/".concat(a.orgId,"/teams/"),{method:"POST",data:e}).then((function(t){return n.a.createTeamSuccess(t),Object(c.d)(Object(r.c)("[team] has been added to the [organization] organization",{team:"#".concat(t.slug),organization:a.orgId})),t}),(function(t){throw n.a.createTeamError(e.slug||e.name,t),Object(c.a)(Object(r.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(e.slug||e.name),organization:a.orgId})),t}))}function b(t,e){return n.a.removeTeam(e.teamId),t.requestPromise("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{method:"DELETE"}).then((function(t){return n.a.removeTeamSuccess(e.teamId,t),Object(c.d)(Object(r.c)("[team] has been removed from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}),(function(t){throw n.a.removeTeamError(e.teamId,t),Object(c.a)(Object(r.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}))}},2848:function(t,e,a){"use strict";a.r(e),a.d(e,"OrganizationTeamsContainer",(function(){return it}));var n=a(5),r=a.n(n),c=a(1),o=a.n(c),i=a(22),s=a.n(i),u=a(27),l=a.n(u),f=a(388),m=a(25),d=a(123),b=a(202),p=a(56),g=a(78),j=a(9),h=a.n(j),O=a(10),v=a.n(O),y=a(11),T=a.n(y),I=a(12),z=a.n(I),S=a(6),C=a.n(S),w=a(105),R=a(1598),k=a(3),L=a(29),P=a(277),M=a(1588),x=a(1599),q=a(17),D=a(7),A=a(618),E=a(620),N=a(21),U=a.n(N),Y=a(26),J=a.n(Y),W=a(4),B=a(31),H=a(1730),F=a(282),G=a(8),K=a(0);function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var V=function(t){T()(n,t);var e,a=(e=n,function(){var t,a=C()(e);if(Q()){var n=C()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return z()(this,t)});function n(){var t;h()(this,n);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(t=a.call.apply(a,[this].concat(r))).state={loading:!1,error:!1},t.handleRequestAccess=J()(U.a.mark((function e(){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props.team;try{t.joinTeam({successMessage:Object(k.c)("You have requested access to [team]",{team:"#".concat(a.slug)}),errorMessage:Object(k.c)("Unable to request access to [team]",{team:"#".concat(a.slug)})})}catch(t){}case 2:case"end":return e.stop()}}),e)}))),t.handleJoinTeam=function(){var e=t.props.team;t.joinTeam({successMessage:Object(k.c)("You have joined [team]",{team:"#".concat(e.slug)}),errorMessage:Object(k.c)("Unable to join [team]",{team:"#".concat(e.slug)})})},t.joinTeam=function(e){var a=e.successMessage,n=e.errorMessage,r=t.props,c=r.api,o=r.organization,i=r.team;return t.setState({loading:!0}),new Promise((function(e,r){return Object(H.c)(c,{orgId:o.slug,teamId:i.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(B.d)(a),e()},error:function(){t.setState({loading:!1,error:!0}),Object(B.a)(n),r(new Error("Unable to join team"))}})}))},t.handleLeaveTeam=function(){var e=t.props,a=e.api,n=e.organization,r=e.team;t.setState({loading:!0}),Object(H.d)(a,{orgId:n.slug,teamId:r.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(B.d)(Object(k.c)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){t.setState({loading:!1,error:!0}),Object(B.a)(Object(k.c)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},t}return v()(n,[{key:"render",value:function(){var t=this.props,e=t.team,a=t.urlPrefix,n=t.openMembership,r=Object(K.f)(F.a,{team:e,avatarSize:36,description:Object(k.d)("%s Member","%s Members",e.memberCount)}),c=e.hasAccess;return Object(K.f)($,null,Object(K.f)(tt,null,c?Object(K.f)(X,{to:"".concat(a,"teams/").concat(e.slug,"/")},r):r),Object(K.f)(_,null,this.state.loading?Object(K.f)(L.a,{size:"small",disabled:!0},"..."):e.isMember?Object(K.f)(L.a,{size:"small",onClick:this.handleLeaveTeam},Object(k.b)("Leave Team")):e.isPending?Object(K.f)(L.a,{size:"small",disabled:!0},Object(k.b)("Request Pending")):n?Object(K.f)(L.a,{size:"small",onClick:this.handleJoinTeam},Object(k.b)("Join Team")):Object(K.f)(L.a,{size:"small",onClick:this.handleRequestAccess},Object(k.b)("Request Access"))))}}]),n}(o.a.Component);V.displayName="AllTeamsRow";var X=Object(W.a)(D.Link,{target:"ekr4bwh0",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",Object(G.a)(1),";padding:",Object(G.a)(1),";background:#f2eff5;border-radius:3px;outline:none;}"),Z=Object(p.a)(V),$=Object(W.a)(P.f,{target:"ekr4bwh1",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),_=Object(W.a)("div",{target:"ekr4bwh2",label:"Spacer"})("padding:",Object(G.a)(2),";"),tt=Object(W.a)(_,{target:"ekr4bwh3",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var at=function(t){T()(n,t);var e,a=(e=n,function(){var t,a=C()(e);if(et()){var n=C()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return z()(this,t)});function n(){var t;h()(this,n);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(t=a.call.apply(a,[this].concat(r))).handleCreateTeam=function(e){var a=t.props,n=a.useCreateModal,r=a.organization;n&&(e.preventDefault(),Object(w.d)({organization:r,onClose:function(){}}))},t}return v()(n,[{key:"render",value:function(){var t=this.props,e=t.access,a=t.organization,n=t.urlPrefix,r=t.openMembership,c=t.useCreateModal,o=this.props.teamList.map((function(t){return Object(K.f)(Z,{urlPrefix:n,access:e,team:t,organization:a,openMembership:r,key:t.slug})}));if(0!==o.length)return o;var i=c?"#":"/organizations/".concat(a.slug,"/teams/new/");return Object(K.f)(A.a,null,Object(k.c)("No teams here. [teamCreate]",{root:Object(K.f)(E.a,{noMargin:!0}),teamCreate:e.has("project:admin")?Object(k.c)("You can always [link:create one].",{link:Object(K.f)(D.Link,{to:i,onClick:this.handleCreateTeam})}):null}))}}]),n}(o.a.Component);at.displayName="AllTeamsList";var nt=at;function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ct=function(t){T()(n,t);var e,a=(e=n,function(){var t,a=C()(e);if(rt()){var n=C()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return z()(this,t)});function n(){return h()(this,n),a.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var t=this.props,e=t.allTeams,a=t.activeTeams,n=t.organization,r=t.access,c=t.features,o=t.routes,i=t.params,s=n;if(!n)return null;var u=r.has("project:admin"),l=Object(K.f)(L.a,{priority:"primary",size:"small",disabled:!u,title:u?void 0:Object(k.b)("You do not have permission to create teams"),onClick:function(){return Object(w.d)({organization:n})},icon:Object(K.f)(q.b,{size:"xs",isCircled:!0})},Object(k.b)("Create Team")),f=o.find((function(t){return"teams/"===t.path})),m=Object(x.a)(f,{routes:o,params:i,stepBack:-2}),d=new Set(a.map((function(t){return t.id}))),b=e.filter((function(t){return!d.has(t.id)})),p=Object(k.b)("Teams");return Object(K.f)("div",{"data-test-id":"team-list"},Object(K.f)(R.a,{title:p,objSlug:n.slug}),Object(K.f)(M.a,{title:p,action:l}),Object(K.f)(P.a,null,Object(K.f)(P.e,null,Object(k.b)("Your Teams")),Object(K.f)(P.c,null,Object(K.f)(nt,{useCreateModal:!0,urlPrefix:m,organization:s,teamList:a,access:r,openMembership:!1}))),Object(K.f)(P.a,null,Object(K.f)(P.e,null,Object(k.b)("Other Teams")),Object(K.f)(P.c,null,Object(K.f)(nt,{useCreateModal:!0,urlPrefix:m,organization:s,teamList:b,access:r,openMembership:!(!c.has("open-membership")&&!r.has("org:write"))}))))}}]),n}(o.a.Component);ct.displayName="OrganizationTeams";var ot=ct,it=l()({displayName:"OrganizationTeamsContainer",mixins:[s.a.listenTo(b.a,"onTeamListChange"),s.a.listenTo(d.a,"onProjectListChange")],getInitialState:function(){return{teamList:Object(m.u)(b.a.getAll(),(function(t){return t&&t.name})),projectList:Object(m.u)(d.a.getAll(),(function(t){return t&&t.name})),projectStats:{}}},componentDidMount:function(){this.fetchStats()},fetchStats:function(){Object(f.f)(this.props.api,{orgId:this.props.params.orgId,query:{since:(new Date).getTime()/1e3-86400,stat:"generated",group:"project"}})},onTeamListChange:function(){var t=b.a.getAll();this.setState({teamList:Object(m.u)(t,(function(t){return t.name}))})},onProjectListChange:function(){var t=d.a.getAll();this.setState({projectList:Object(m.u)(t,(function(t){return t.name}))})},render:function(){var t=this.props.organization;if(!t)return null;var e=this.state.teamList,a=this.state.teamList.filter((function(t){return t.isMember}));return Object(K.f)(ot,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,projectList:this.state.projectList,allTeams:e,activeTeams:a}))}});e.default=Object(p.a)(Object(g.a)(it))}}]);
//# sourceMappingURL=OrganizationTeams.js.map