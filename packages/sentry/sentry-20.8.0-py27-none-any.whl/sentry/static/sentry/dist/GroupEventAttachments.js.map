{"version":3,"sources":["webpack:///./app/components/dateTime.tsx","webpack:///./app/components/fileSize.tsx","webpack:///./app/utils/attachmentUrl.tsx","webpack:///./app/components/events/eventAttachmentActions.tsx","webpack:////workspace/node_modules/lodash/isArrayLikeObject.js","webpack:////workspace/node_modules/lodash/xor.js","webpack:////workspace/node_modules/lodash/_baseXor.js","webpack:////workspace/node_modules/lodash/_baseDifference.js","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/types.tsx","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsTableRow.tsx","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsTable.tsx","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsFilter.tsx","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachments.tsx","webpack:///./app/views/organizationGroupDetails/groupEventAttachments/index.tsx"],"names":["DateTime","getFormat","clock24Hours","props","dateOnly","timeOnly","seconds","shortDate","timeAndDate","this","date","utc","carriedProps","user","ConfigStore","get","options","format","moment","tz","timezone","React","Component","defaultProps","FileSize","className","bytes","getDynamicText","value","formatBytes","fixed","AttachmentUrl","isSuperuser","organization","availableRoles","attachmentsRole","role","Array","isArray","roleIds","map","r","id","requiredIndex","indexOf","attachment","eventId","projectId","slug","children","hasAttachmentsRole","getDownloadUrl","PureComponent","withOrganization","EventAttachmentActions","handleDelete","a","api","url","onDelete","attachmentId","requestPromise","method","Fragment","DownloadButton","size","icon","href","disabled","title","undefined","t","confirmText","message","priority","onConfirm","Button","space","withApi","isArrayLike","isObjectLike","module","exports","arrayFilter","baseRest","baseXor","isArrayLikeObject","xor","arrays","baseDifference","baseFlatten","baseUniq","iteratee","comparator","length","index","result","array","othIndex","SetCache","arrayIncludes","arrayIncludesWith","arrayMap","baseUnary","cacheHas","values","includes","isCommon","valuesLength","outer","computed","valuesIndex","push","types","GroupEventAttachmentsTableRow","isDeleted","orgId","groupId","TableRow","name","dateCreated","to","event_id","type","p","GroupEventAttachmentsTable","attachments","deletedAttachments","tableRowNames","key","some","GroupEventAttachmentsFilter","location","query","pathname","onlyCrashReportTypes","allAttachmentsQuery","omit","onlyCrashReportsQuery","activeButton","FilterWrapper","merged","active","barId","withRouter","GroupEventAttachments","deletedAttachmentId","setState","prevState","params","pick","limit","renderBody","projectSlug","state","loading","eventAttachments","renderNoQueryResults","renderEmpty","renderInnerBody","pageLinks","eventAttachmentsPageLinks","AsyncComponent","ReactRouter","GroupEventAttachmentsContainer","group","features","renderDisabled","project"],"mappings":"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","file":"GroupEventAttachments.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport moment from 'moment-timezone';\n\nimport ConfigStore from 'app/stores/configStore';\n\ntype DefaultProps = {\n  seconds: boolean;\n};\n\ntype Props = DefaultProps & {\n  date: moment.MomentInput;\n  dateOnly?: boolean;\n  timeOnly?: boolean;\n  shortDate?: boolean;\n  timeAndDate?: boolean;\n  utc?: boolean;\n};\n\nclass DateTime extends React.Component<Props> {\n  static propTypes = {\n    date: PropTypes.any.isRequired,\n    dateOnly: PropTypes.bool,\n    timeOnly: PropTypes.bool,\n    shortDate: PropTypes.bool,\n    seconds: PropTypes.bool,\n    timeAndDate: PropTypes.bool,\n    utc: PropTypes.bool,\n  };\n\n  static defaultProps: DefaultProps = {\n    seconds: true,\n  };\n\n  getFormat = ({clock24Hours}: {clock24Hours: boolean}): string => {\n    const {dateOnly, timeOnly, seconds, shortDate, timeAndDate} = this.props;\n\n    // October 26, 2017\n    if (dateOnly) {\n      return 'LL';\n    }\n\n    // Oct 26, 2017 11:30:30 AM\n    if (timeAndDate) {\n      return 'MMM DD, LT';\n    }\n\n    // 4:57 PM\n    if (timeOnly) {\n      return 'LT';\n    }\n\n    if (shortDate) {\n      return 'MM/DD/YYYY';\n    }\n\n    if (clock24Hours) {\n      return 'MMMM D YYYY HH:mm:ss z';\n    }\n\n    // Oct 26, 2017 11:30:30 AM\n    if (seconds) {\n      return 'll LTS z';\n    }\n\n    // Default is Oct 26, 2017 11:30 AM\n    return 'lll';\n  };\n\n  render() {\n    const {\n      date,\n      utc,\n      seconds: _seconds,\n      shortDate: _shortDate,\n      dateOnly: _dateOnly,\n      timeOnly: _timeOnly,\n      timeAndDate: _timeAndDate,\n      ...carriedProps\n    } = this.props;\n    const user = ConfigStore.get('user');\n    const options = user?.options;\n    const format = this.getFormat(options);\n\n    return (\n      <time {...carriedProps}>\n        {utc\n          ? moment.utc(date).format(format)\n          : moment.tz(date, options?.timezone ?? '').format(format)}\n      </time>\n    );\n  }\n}\n\nexport default DateTime;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {formatBytes} from 'app/utils';\nimport getDynamicText from 'app/utils/getDynamicText';\n\ntype Props = {\n  className?: string;\n  bytes: number;\n};\n\nfunction FileSize(props: Props) {\n  const {className, bytes} = props;\n\n  return (\n    <span className={className}>\n      {getDynamicText({value: formatBytes(bytes), fixed: 'xx KB'})}\n    </span>\n  );\n}\n\nFileSize.propTypes = {\n  className: PropTypes.string,\n  bytes: PropTypes.number.isRequired,\n};\n\nexport default FileSize;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {Organization, EventAttachment} from 'app/types';\nimport ConfigStore from 'app/stores/configStore';\nimport withOrganization from 'app/utils/withOrganization';\nimport SentryTypes from 'app/sentryTypes';\n\ntype Props = {\n  organization: Organization;\n  projectId: string;\n  eventId: string;\n  attachment: EventAttachment;\n  children: (downloadUrl: string | null) => React.ReactNode;\n};\n\nclass AttachmentUrl extends React.PureComponent<Props> {\n  static propTypes = {\n    organization: SentryTypes.Organization.isRequired,\n    projectId: PropTypes.string.isRequired,\n    eventId: PropTypes.string.isRequired,\n    attachment: SentryTypes.EventAttachment.isRequired,\n    children: PropTypes.func.isRequired,\n  };\n\n  hasAttachmentsRole() {\n    const user = ConfigStore.get('user');\n    if (!user) {\n      return false;\n    }\n\n    if (user.isSuperuser) {\n      return true;\n    }\n\n    const {availableRoles, attachmentsRole, role} = this.props.organization;\n    if (!Array.isArray(availableRoles)) {\n      return false;\n    }\n\n    const roleIds = availableRoles.map(r => r.id);\n    const requiredIndex = roleIds.indexOf(attachmentsRole);\n    const currentIndex = roleIds.indexOf(role || '');\n    return currentIndex >= requiredIndex;\n  }\n\n  getDownloadUrl() {\n    const {attachment, organization, eventId, projectId} = this.props;\n    return `/api/0/projects/${organization.slug}/${projectId}/events/${eventId}/attachments/${attachment.id}/`;\n  }\n\n  render() {\n    const {children} = this.props;\n    return children(this.hasAttachmentsRole() ? this.getDownloadUrl() : null);\n  }\n}\n\nexport default withOrganization(AttachmentUrl);\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'app/locale';\nimport Button from 'app/components/button';\nimport space from 'app/styles/space';\nimport Confirm from 'app/components/confirm';\nimport {IconDelete, IconDownload} from 'app/icons';\nimport withApi from 'app/utils/withApi';\nimport {Client} from 'app/api';\n\ntype Props = {\n  api: Client;\n  url: string | null;\n  attachmentId: string;\n  onDelete: (attachmentId: string) => void;\n};\n\nclass EventAttachmentActions extends React.Component<Props> {\n  handleDelete = async () => {\n    const {api, url, onDelete, attachmentId} = this.props;\n\n    if (url) {\n      try {\n        await api.requestPromise(url, {\n          method: 'DELETE',\n        });\n\n        onDelete(attachmentId);\n      } catch (_err) {\n        // TODO: Error-handling\n      }\n    }\n  };\n\n  render() {\n    const {url} = this.props;\n\n    return (\n      <React.Fragment>\n        <DownloadButton\n          size=\"xsmall\"\n          icon={<IconDownload size=\"xs\" />}\n          href={url ? `${url}?download=1` : ''}\n          disabled={!url}\n          title={!url ? t('Insufficient permissions to download attachments') : undefined}\n        >\n          {t('Download')}\n        </DownloadButton>\n\n        <Confirm\n          confirmText={t('Delete')}\n          message={t('Are you sure you wish to delete this file?')}\n          priority=\"danger\"\n          onConfirm={this.handleDelete}\n          disabled={!url}\n        >\n          <Button\n            size=\"xsmall\"\n            icon={<IconDelete size=\"xs\" />}\n            disabled={!url}\n            priority=\"danger\"\n            title={!url ? t('Insufficient permissions to delete attachments') : undefined}\n          />\n        </Confirm>\n      </React.Fragment>\n    );\n  }\n}\n\nconst DownloadButton = styled(Button)`\n  margin-right: ${space(0.5)};\n`;\n\nexport default withApi(EventAttachmentActions);\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var arrayFilter = require('./_arrayFilter'),\n    baseRest = require('./_baseRest'),\n    baseXor = require('./_baseXor'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nmodule.exports = xor;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nmodule.exports = baseXor;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","import {t} from 'app/locale';\n\nexport const types = {\n  'event.minidump': t('Minidump'),\n  'event.applecrashreport': t('Apple Crash Report'),\n  'event.attachment': t('Other'),\n};\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport Link from 'app/components/links/link';\nimport {t} from 'app/locale';\nimport DateTime from 'app/components/dateTime';\nimport FileSize from 'app/components/fileSize';\nimport {EventAttachment} from 'app/types';\nimport AttachmentUrl from 'app/utils/attachmentUrl';\nimport EventAttachmentActions from 'app/components/events/eventAttachmentActions';\nimport {types} from 'app/views/organizationGroupDetails/groupEventAttachments/types';\n\ntype Props = {\n  orgId: string;\n  projectId: string;\n  groupId: string;\n  attachment: EventAttachment;\n  onDelete: (attachmentId: string) => void;\n  isDeleted: boolean;\n};\n\nconst GroupEventAttachmentsTableRow = ({\n  attachment,\n  projectId,\n  onDelete,\n  isDeleted,\n  orgId,\n  groupId,\n}: Props) => (\n  <TableRow isDeleted={isDeleted}>\n    <td>\n      <h5>\n        {attachment.name}\n        <br />\n        <small>\n          <DateTime date={attachment.dateCreated} /> &middot;{' '}\n          <Link\n            to={`/organizations/${orgId}/issues/${groupId}/events/${attachment.event_id}/`}\n          >\n            {attachment.event_id}\n          </Link>\n        </small>\n      </h5>\n    </td>\n\n    <td>{types[attachment.type] || t('Other')}</td>\n\n    <td>\n      <FileSize bytes={attachment.size} />\n    </td>\n\n    <td>\n      <AttachmentUrl\n        projectId={projectId}\n        eventId={attachment.event_id}\n        attachment={attachment}\n      >\n        {url =>\n          !isDeleted && (\n            <EventAttachmentActions\n              url={url}\n              onDelete={onDelete}\n              attachmentId={attachment.id}\n            />\n          )\n        }\n      </AttachmentUrl>\n    </td>\n  </TableRow>\n);\n\nconst TableRow = styled('tr')<{isDeleted: boolean}>`\n  opacity: ${p => (p.isDeleted ? 0.3 : 1)};\n  td {\n    text-decoration: ${p => (p.isDeleted ? 'line-through' : 'normal')};\n  }\n`;\n\nexport default GroupEventAttachmentsTableRow;\n","import React from 'react';\n\nimport {EventAttachment} from 'app/types';\nimport {t} from 'app/locale';\nimport GroupEventAttachmentsTableRow from 'app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsTableRow';\n\ntype Props = {\n  attachments: EventAttachment[];\n  orgId: string;\n  projectId: string;\n  groupId: string;\n  onDelete: (attachmentId: string) => void;\n  deletedAttachments: string[];\n};\n\nconst GroupEventAttachmentsTable = ({\n  attachments,\n  orgId,\n  projectId,\n  groupId,\n  onDelete,\n  deletedAttachments,\n}: Props) => {\n  const tableRowNames = [t('Name'), t('Type'), t('Size'), t('Actions')];\n\n  return (\n    <table className=\"table events-table\">\n      <thead>\n        <tr>\n          {tableRowNames.map(name => (\n            <th key={name}>{name}</th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {attachments.map(attachment => (\n          <GroupEventAttachmentsTableRow\n            key={attachment.id}\n            attachment={attachment}\n            orgId={orgId}\n            projectId={projectId}\n            groupId={groupId}\n            onDelete={onDelete}\n            isDeleted={deletedAttachments.some(id => attachment.id === id)}\n          />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default GroupEventAttachmentsTable;\n","import React from 'react';\nimport omit from 'lodash/omit';\nimport xor from 'lodash/xor';\nimport {withRouter} from 'react-router';\nimport {WithRouterProps} from 'react-router/lib/withRouter';\nimport styled from '@emotion/styled';\n\nimport space from 'app/styles/space';\nimport {t} from 'app/locale';\nimport ButtonBar from 'app/components/buttonBar';\nimport Button from 'app/components/button';\n\nconst GroupEventAttachmentsFilter = (props: WithRouterProps) => {\n  const {query, pathname} = props.location;\n  const {types} = query;\n  const onlyCrashReportTypes = ['event.minidump', 'event.applecrashreport'];\n  const allAttachmentsQuery = omit(query, 'types');\n  const onlyCrashReportsQuery = {\n    ...query,\n    types: onlyCrashReportTypes,\n  };\n\n  let activeButton = '';\n\n  if (types === undefined) {\n    activeButton = 'all';\n  } else if (xor(onlyCrashReportTypes, types).length === 0) {\n    activeButton = 'onlyCrash';\n  }\n\n  return (\n    <FilterWrapper>\n      <ButtonBar merged active={activeButton}>\n        <Button barId=\"all\" size=\"small\" to={{pathname, query: allAttachmentsQuery}}>\n          {t('All Attachments')}\n        </Button>\n        <Button\n          barId=\"onlyCrash\"\n          size=\"small\"\n          to={{pathname, query: onlyCrashReportsQuery}}\n        >\n          {t('Only Crash Reports')}\n        </Button>\n      </ButtonBar>\n    </FilterWrapper>\n  );\n};\n\nconst FilterWrapper = styled('div')`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: ${space(3)};\n`;\n\nexport default withRouter(GroupEventAttachmentsFilter);\n","import React from 'react';\nimport pick from 'lodash/pick';\nimport * as ReactRouter from 'react-router';\n\nimport {Panel, PanelBody} from 'app/components/panels';\nimport {t} from 'app/locale';\nimport EmptyStateWarning from 'app/components/emptyStateWarning';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport Pagination from 'app/components/pagination';\nimport AsyncComponent from 'app/components/asyncComponent';\n\nimport GroupEventAttachmentsTable from './groupEventAttachmentsTable';\nimport GroupEventAttachmentsFilter from './groupEventAttachmentsFilter';\n\ntype Props = {\n  projectSlug: string;\n} & ReactRouter.WithRouterProps &\n  AsyncComponent['props'];\n\ntype State = {\n  deletedAttachments: string[];\n} & AsyncComponent['state'];\n\nclass GroupEventAttachments extends AsyncComponent<Props, State> {\n  getDefaultState() {\n    return {\n      ...super.getDefaultState(),\n      deletedAttachments: [],\n    };\n  }\n\n  getEndpoints(): [string, string, {}][] {\n    const {params, location} = this.props;\n\n    return [\n      [\n        'eventAttachments',\n        `/issues/${params.groupId}/attachments/`,\n        {\n          query: {\n            ...pick(location.query, ['cursor', 'environment', 'types']),\n            limit: 50,\n          },\n        },\n      ],\n    ];\n  }\n\n  handleDelete = (deletedAttachmentId: string) => {\n    this.setState(prevState => ({\n      deletedAttachments: [...prevState.deletedAttachments, deletedAttachmentId],\n    }));\n  };\n\n  renderNoQueryResults() {\n    return (\n      <EmptyStateWarning>\n        <p>{t('Sorry, no event attachments match your search query.')}</p>\n      </EmptyStateWarning>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <EmptyStateWarning>\n        <p>{t(\"There don't seem to be any event attachments yet.\")}</p>\n      </EmptyStateWarning>\n    );\n  }\n\n  renderLoading() {\n    return this.renderBody();\n  }\n\n  renderInnerBody() {\n    const {projectSlug, params, location} = this.props;\n    const {loading, eventAttachments, deletedAttachments} = this.state;\n\n    if (loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (eventAttachments.length > 0) {\n      return (\n        <GroupEventAttachmentsTable\n          attachments={eventAttachments}\n          orgId={params.orgId}\n          projectId={projectSlug}\n          groupId={params.groupId}\n          onDelete={this.handleDelete}\n          deletedAttachments={deletedAttachments}\n        />\n      );\n    }\n\n    if (location.query.types) {\n      return this.renderNoQueryResults();\n    }\n\n    return this.renderEmpty();\n  }\n\n  renderBody() {\n    return (\n      <React.Fragment>\n        <GroupEventAttachmentsFilter />\n        <Panel className=\"event-list\">\n          <PanelBody>{this.renderInnerBody()}</PanelBody>\n        </Panel>\n        <Pagination pageLinks={this.state.eventAttachmentsPageLinks} />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ReactRouter.withRouter(GroupEventAttachments);\n","import React from 'react';\nimport {RouteComponentProps} from 'react-router/lib/Router';\n\nimport {Organization, Group} from 'app/types';\nimport Feature from 'app/components/acl/feature';\nimport withOrganization from 'app/utils/withOrganization';\nimport FeatureDisabled from 'app/components/acl/featureDisabled';\n\nimport GroupEventAttachments from './groupEventAttachments';\n\ntype Props = RouteComponentProps<{orgId: string; groupId: string}, {}> & {\n  organization: Organization;\n  group: Group;\n};\n\nconst GroupEventAttachmentsContainer = ({organization, group}: Props) => (\n  <Feature\n    features={['event-attachments']}\n    organization={organization}\n    renderDisabled={props => <FeatureDisabled {...props} />}\n  >\n    <GroupEventAttachments projectSlug={group.project.slug} />\n  </Feature>\n);\n\nexport default withOrganization(GroupEventAttachmentsContainer);\n"],"sourceRoot":""}