(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[191,182],{1634:function(t,e,n){"use strict";n(1);var r=n(25),a=n(329),i=n(0);function c(t){var e=t.className,n=t.bytes;return Object(i.f)("span",{className:e},Object(a.a)({value:Object(r.j)(n),fixed:"xx KB"}))}c.displayName="FileSize",e.a=c},1694:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(15),c=n.n(i),o=n(9),s=n.n(o),l=n(10),u=n.n(l),f=n(11),b=n.n(f),p=n(12),d=n.n(p),h=n(6),j=n.n(h),O=n(1),y=n.n(O),m=n(46),g=n.n(m),v=n(279),w=n(0);function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var x=function(t){b()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(R()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(){return s()(this,r),n.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.disabled,r=t.title,i=t.children,o=c()(t,["className","disabled","title","children"]);return Object(w.f)(v.a,a()({},o,{disabled:n}),Object(w.f)("a",{href:"#",className:g()(e||"",{disabled:n}),title:r},i))}}]),r}(y.a.PureComponent);x.displayName="LinkWithConfirmation",e.a=x},1706:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(15),c=n.n(i),o=n(9),s=n.n(o),l=n(10),u=n.n(l),f=n(11),b=n.n(f),p=n(12),d=n.n(p),h=n(6),j=n.n(h),O=n(4),y=n(1),m=n.n(y),g=n(182),v=n.n(g),w=n(101),R=n(79),x=n(17),k=n(8),z=n(0);function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var L=function(t){b()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(N()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(){return s()(this,r),n.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var t=this.props,e=t.size,n=t.priority,r=t.icon,a=t.children,i=t.onClick,c=t.withoutMarginBottom,o=t.openInNewTab,s=t.to,l=t.href;return Object(z.f)(D,{to:s,href:l,onClick:i,size:e,priority:n,withoutMarginBottom:c,openInNewTab:o},r&&Object(z.f)(S,null,r),Object(z.f)(I,null,a),Object(z.f)(C,null,Object(z.f)(x.k,{direction:"right"})))}}]),r}(m.a.Component);L.displayName="AlertLink",L.defaultProps={priority:"warning",size:"normal",withoutMarginBottom:!1,openInNewTab:!1},e.a=L;var D=Object(O.a)((function(t){var e=t.openInNewTab,n=t.to,r=t.href,i=c()(t,["openInNewTab","to","href"]),o=v()(i,["withoutMarginBottom","priority","size"]);return r?Object(z.f)(R.a,a()({},o,{href:r,openInNewTab:e})):Object(z.f)(w.a,a()({},o,{to:n||""}))}),{target:"e1ylhppg0",label:"StyledLink"})("display:flex;background-color:",(function(t){return t.theme.alert[t.priority].backgroundLight}),";color:",(function(t){return t.theme.gray700}),";border:1px dashed ",(function(t){return t.theme.alert[t.priority].border}),";padding:",(function(t){return"small"===t.size?"".concat(Object(k.a)(1)," ").concat(Object(k.a)(1.5)):Object(k.a)(2)}),";margin-bottom:",(function(t){return t.withoutMarginBottom?0:Object(k.a)(3)}),";border-radius:0.25em;transition:0.2s border-color;&.focus-visible{outline:none;box-shadow:",(function(t){return t.theme.alert[t.priority].border}),"7f 0 0 0 2px;}"),S=Object(O.a)("span",{target:"e1ylhppg1",label:"IconWrapper"})("display:flex;margin:",Object(k.a)(.5)," ",Object(k.a)(1.5)," ",Object(k.a)(.5)," 0;"),C=Object(O.a)(S,{target:"e1ylhppg2",label:"IconLink"})("margin:",Object(k.a)(.5)," 0;"),I=Object(O.a)("div",{target:"e1ylhppg3",label:"AlertLinkText"})({name:"56nju3",styles:"line-height:1.5;flex-grow:1;"})},2223:function(t,e,n){"use strict";n.r(e),n.d(e,"ReleaseArtifacts",(function(){return B}));var r=n(30),a=n.n(r),i=n(9),c=n.n(i),o=n(10),s=n.n(o),l=n(11),u=n.n(l),f=n(12),b=n.n(f),p=n(6),d=n.n(p),h=n(4),j=n(1),O=n.n(j),y=n(182),m=n.n(y),g=n(277),v=n(74),w=n(31),R=n(3),x=n(29),k=n(378),z=n(1634),N=n(1694),L=n(183),D=n(50),S=n(619),C=n(56),I=n(78),T=n(8),A=n(17),M=n(0);function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){u()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(E()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b()(this,t)});function r(){var t;return c()(this,r),(t=n.call(this)).fetchData=function(){t.setState({loading:!0,error:!1}),t.props.api.request(t.getFilesEndpoint(),{method:"GET",data:m()(t.props.location.query,[].concat(a()(Object.values(v.e)),["query"])),success:function(e,n,r){t.setState({error:!1,loading:!1,fileList:e,pageLinks:r.getResponseHeader("Link")})},error:function(){t.setState({error:!0,loading:!1})}})},t.state={loading:!0,error:!1,fileList:[],pageLinks:null},t}return s()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getFilesEndpoint",value:function(){var t=this.props.params,e=t.orgId,n=t.projectId,r=t.release,a=encodeURIComponent(r),i=null!=n?n:this.props.projectId;return i?"/projects/".concat(e,"/").concat(i,"/releases/").concat(a,"/files/"):"/organizations/".concat(e,"/releases/").concat(a,"/files/")}},{key:"handleRemove",value:function(t){var e=this;Object(w.b)(Object(R.b)("Removing artifactâ€¦")),this.props.api.request(this.getFilesEndpoint()+"".concat(t,"/"),{method:"DELETE",success:function(){var n=e.state.fileList.filter((function(e){return e.id!==t}));e.setState({fileList:n}),Object(w.d)(Object(R.b)("Artifact removed."))},error:function(){Object(w.a)(Object(R.b)("Unable to remove artifact. Please try again."))}})}},{key:"render",value:function(){var t=this;if(this.state.loading)return Object(M.f)(D.default,null);if(this.state.error)return Object(M.f)(L.a,{onRetry:this.fetchData});if(0===this.state.fileList.length)return Object(M.f)(g.a,null,Object(M.f)(g.c,null,Object(M.f)(k.a,{small:this.props.smallEmptyMessage},Object(M.f)("p",null,Object(R.b)("There are no artifacts uploaded for this release.")))));var e=new Set(this.props.organization.access);return Object(M.f)("div",null,Object(M.f)(g.a,null,Object(M.f)(g.e,null,Object(M.f)(P,null,Object(R.b)("Name")),Object(M.f)(q,null,Object(R.b)("Distribution")),Object(M.f)(F,null,Object(R.b)("Size"))),Object(M.f)(g.c,null,this.state.fileList.map((function(n){return Object(M.f)(g.f,{key:n.id},Object(M.f)(P,null,Object(M.f)("strong",null,n.name||"(empty)")),Object(M.f)(q,null,n.dist||Object(M.f)("span",{className:"text-light"},Object(R.b)("None"))),Object(M.f)(F,null,Object(M.f)(z.a,{bytes:n.size}),Object(M.f)(W,null,e.has("project:write")?Object(M.f)(x.a,{"data-test-id":"artifact-download",href:t.props.api.baseUrl+t.getFilesEndpoint()+"".concat(n.id,"/?download=1"),size:"small",icon:Object(M.f)(A.cb,{size:"xs"})}):Object(M.f)(x.a,{"data-test-id":"artifact-download",title:Object(R.b)("You do not have the required permission to download this artifact."),disabled:!0,size:"small",icon:Object(M.f)(A.cb,{size:"xs"})}),Object(M.f)("div",{style:{marginLeft:5}},Object(M.f)(N.a,{className:"btn btn-sm btn-default",title:Object(R.b)("Delete artifact"),message:Object(R.b)("Are you sure you want to remove this artifact?"),onConfirm:t.handleRemove.bind(t,n.id)},Object(M.f)(A.s,null))))))})))),Object(M.f)(S.a,{pageLinks:this.state.pageLinks}))}}]),r}(O.a.Component);B.displayName="ReleaseArtifacts";var P=Object(h.a)("div",{target:"e9h6amz0",label:"NameColumn"})("display:flex;flex:7;padding-right:",Object(T.a)(2),";word-wrap:break-word;word-break:break-all;"),q=Object(h.a)("div",{target:"e9h6amz1",label:"DistributionColumn"})("display:flex;flex:2;padding-right:",Object(T.a)(2),";"),F=Object(h.a)("div",{target:"e9h6amz2",label:"SizeAndActionsColumn"})({name:"8if6xy",styles:"display:flex;flex:3;justify-content:space-between;"}),W=Object(h.a)("div",{target:"e9h6amz3",label:"AlignCenter"})({name:"70qvj9",styles:"display:flex;align-items:center;"});e.default=Object(I.a)(Object(C.a)(B))},2782:function(t,e,n){"use strict";n.r(e);var r=n(9),a=n.n(r),i=n(10),c=n.n(i),o=n(11),s=n.n(o),l=n(12),u=n.n(l),f=n(6),b=n.n(f),p=(n(1),n(3)),d=n(2223),h=n(1586),j=n(1593),O=n(140),y=n(78),m=n(1706),g=n(184),v=n(1633),w=n(1952),R=n(0);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){s()(r,t);var e,n=(e=r,function(){var t,n=b()(e);if(x()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return c()(r,[{key:"getTitle",value:function(){var t=this.props,e=t.params,n=t.organization;return Object(j.a)(Object(p.b)("Artifacts - Release %s",Object(O.i)(e.release)),n.slug,!1)}},{key:"renderBody",value:function(){var t=this.context.project,e=this.props,n=e.params,r=e.location,a=e.organization;return Object(R.f)(v.e,{fullWidth:!0},Object(R.f)(g.a,{features:["artifacts-in-settings"]},(function(e){return e.hasFeature?Object(R.f)(m.a,{to:"/settings/".concat(a.slug,"/projects/").concat(t.slug,"/source-maps/").concat(encodeURIComponent(n.release),"/"),priority:"info"},Object(p.c)("Artifacts were moved to [sourceMaps] in Settings.",{sourceMaps:Object(R.f)("u",null,Object(p.b)("Source Maps"))})):Object(R.f)(d.default,{params:n,location:r,projectId:t.slug,smallEmptyMessage:!0})})))}}]),r}(h.a);k.contextType=w.ReleaseContext,e.default=Object(y.a)(k)}}]);
//# sourceMappingURL=ReleasesV2DetailArtifacts.js.map