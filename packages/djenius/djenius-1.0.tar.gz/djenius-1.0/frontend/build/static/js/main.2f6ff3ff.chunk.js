(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={emptyContent:"Player_emptyContent__PYqRL",paddedIcon:"Player_paddedIcon__Zm9bz",scrollArea:"Player_scrollArea__U6z87",coverArt:"Player_coverArt__qPjHo",button:"Player_button__1palW",togglerWithIcon:"Player_togglerWithIcon__RGjdN",title:"Player_title__3lBy9",infoLine:"Player_infoLine__1YeqS",resolver:"Player_resolver__1AYnr",noArtist:"Player_noArtist__1c0h9",tag:"Player_tag__2gU4R",player:"Player_player__1vZPf",heading:"Player_heading__2Cdne",songCard:"Player_songCard__D0LbE",playPause:"Player_playPause__2x0_4",next:"Player_next__38tcL",active:"Player_active__RihX4",progress:"Player_progress__3luFx",seek:"Player_seek__3GR1m",handles:"Player_handles__3JC-d",tracks:"Player_tracks__1rwTT",ticks:"Player_ticks__3RR8H",rail:"Player_rail__10YSc",track:"Player_track__1ouuh",handle:"Player_handle__1xcGJ",tick:"Player_tick__NFDBT"}},13:function(e,t,n){e.exports={emptyContent:"Controller_emptyContent__2uuyW",paddedIcon:"Controller_paddedIcon__B7ai7",scrollArea:"Controller_scrollArea__2id8p",coverArt:"Controller_coverArt__2SV1F",button:"Controller_button__1fqXx",togglerWithIcon:"Controller_togglerWithIcon__36nit",title:"Controller_title__17RVJ",infoLine:"Controller_infoLine__3CjQX",resolver:"Controller_resolver__3GlgS",noArtist:"Controller_noArtist__30LIF",tag:"Controller_tag__2tB8T",controller:"Controller_controller__2y6d-",heading:"Controller_heading__Mjh4R",body:"Controller_body__2-vsh",playPause:"Controller_playPause__2H8TR",next:"Controller_next__2uUgU",active:"Controller_active__h5nYz",volumeIcon:"Controller_volumeIcon__3c-YU",volume:"Controller_volume__mbZep",handles:"Controller_handles__3OWVs",tracks:"Controller_tracks__107s_",ticks:"Controller_ticks__tPOao",rail:"Controller_rail__tv0q5",track:"Controller_track__LGlAM",handle:"Controller_handle__2xY47",tick:"Controller_tick__3YM5D",tts:"Controller_tts__2AlNe",ttsText:"Controller_ttsText__3ZkYP",ttsEnqueue:"Controller_ttsEnqueue__3zsrR",ttsPlay:"Controller_ttsPlay__3nBRH"}},14:function(e,t,n){e.exports={emptyContent:"Search_emptyContent__zLUuY",paddedIcon:"Search_paddedIcon__21Cax",scrollArea:"Search_scrollArea__1YW5V",coverArt:"Search_coverArt__3UwpG",button:"Search_button__3l0fY",togglerWithIcon:"Search_togglerWithIcon__2N8OB",search:"Search_search__1ZkvN",spaceBetween:"Search_spaceBetween__Gjb21",active:"Search_active__NvI_q",clearSearch:"Search_clearSearch__2mWxt",visible:"Search_visible__inm_Q",searchInput:"Search_searchInput__127m-",searchLibrary:"Search_searchLibrary__19nTj"}},25:function(e,t,n){e.exports={emptyContent:"Queue_emptyContent__3-tWu",paddedIcon:"Queue_paddedIcon__3Vxi5",scrollArea:"Queue_scrollArea__3nip6",coverArt:"Queue_coverArt__3MsGp",button:"Queue_button__tAU2Z",togglerWithIcon:"Queue_togglerWithIcon__1_I2h",heading:"Queue_heading__1Dnij",queue:"Queue_queue__2xLLa"}},32:function(e,t,n){e.exports={emptyContent:"HeadingStub_emptyContent__2xP3T",paddedIcon:"HeadingStub_paddedIcon__2W0cO",scrollArea:"HeadingStub_scrollArea__1FU7M",coverArt:"HeadingStub_coverArt__1uK5e",button:"HeadingStub_button__5ww15",togglerWithIcon:"HeadingStub_togglerWithIcon__1QT7z",headingStub:"HeadingStub_headingStub__9Ok6-",icon:"HeadingStub_icon__1Rs-X"}},34:function(e,t,n){e.exports={emptyContent:"SystemOverlay_emptyContent__9oAg-",paddedIcon:"SystemOverlay_paddedIcon__1bSFE",scrollArea:"SystemOverlay_scrollArea__2Jmi8",coverArt:"SystemOverlay_coverArt__1qT0R",button:"SystemOverlay_button__3pllX",togglerWithIcon:"SystemOverlay_togglerWithIcon__33LmR",systemOverlay:"SystemOverlay_systemOverlay__GlAXw",connected:"SystemOverlay_connected__4PK1N"}},43:function(e,t,n){},44:function(e,t,n){e.exports={emptyContent:"App_emptyContent__1f-jS",paddedIcon:"App_paddedIcon__d8IHt",scrollArea:"App_scrollArea__1J-dc",coverArt:"App_coverArt__EXlLl",button:"App_button__1-QgB",togglerWithIcon:"App_togglerWithIcon__QxgV1",header:"App_header__DjJD8"}},45:function(e,t,n){n(46),e.exports=n(73)},5:function(e,t,n){e.exports={emptyContent:"SongCard_emptyContent__t0M2a",paddedIcon:"SongCard_paddedIcon__2Tu4h",scrollArea:"SongCard_scrollArea__1pK2j",coverArt:"SongCard_coverArt__27QyF",button:"SongCard_button__1ll2k",togglerWithIcon:"SongCard_togglerWithIcon__lvMEC",title:"SongCard_title__1Rc4f",infoLine:"SongCard_infoLine__2pi0o",resolver:"SongCard_resolver__2EVy7",noArtist:"SongCard_noArtist__uyoWG",tag:"SongCard_tag__1AZJO",songCard:"SongCard_songCard__2tlEy",extra:"SongCard_extra__akBe1",duration:"SongCard_duration__3N-3D",votes:"SongCard_votes__IfyXU",voteCount:"SongCard_voteCount__37kqx",promoted:"SongCard_promoted__3vigo",suggest:"SongCard_suggest__Fj4XD",active:"SongCard_active__3lVBJ",ban:"SongCard_ban__2SScC",promote:"SongCard_promote__2j0WG",voteDown:"SongCard_voteDown__3YF-i",voteUp:"SongCard_voteUp__2yvi2"}},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(38),o=n.n(c),l=n(15),s=n(20),u=n(16),i=n(41),d=n(26),p="all",m="UpVote",b="DownVote",f="Search",_="Suggest",g="Ban",v="Accept",y="Pause",h="Seek",k="Volume",C="Skip",O="AdminQueue",E="EventLog",x=[k,h,C,y];var S=new d.a([]);function j(e){S.update(function(e){var t=d.b.extract(),n=t.can,r=t.rules;console.log("defined capabilities for",e.name,e.caps);var a=!0,c=!1,o=void 0;try{for(var l,s=e.caps[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)n(l.value,p)}catch(e){c=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(c)throw o}}return r}(e))}function w(e){return S.can(e,p)}var P=S,I=Object(i.a)(P),N=n(7),A=n(12),q=n(6),Q=function(e){var t=Math.floor(e/60);return Math.floor(t%60)+":"+(""+Math.floor(e%60)).padStart(2,"0")},U=function(e){return e.song.id},R=function(e){return null!==e.adminIndex?"admin-".concat(e.adminIndex):U(e)},L=n(32),M=n.n(L),W=n(9),D=n.n(W),T=function(e){var t=e.icon,n=e.children,r=e.className;return a.a.createElement("div",{className:W(M.a.headingStub,r)},a.a.createElement(N.a,{className:M.a.icon,icon:t}),n)},B=n(10),F=n.n(B),V=n(17),z="ws://".concat(window.WS_ENDPOINT,"/ws"),H=1.5,Y="",J=1;function G(e){return"".concat(Y,"/").concat(e.song.coverId)}function X(){return J}A.b.add(q.j,q.i,q.g,q.p,q.h);var Z=function(e){var t=e.position,n=e.duration,r=e.onChange,c=e.onUpdate,o=w(h);return a.a.createElement(V.c,{className:F.a.seek,domain:[0,parseInt(n||0)],mode:2,onChange:function(e){return r&&r(e[0])},onUpdate:function(e){return c&&c(e[0])},values:[parseInt(t||0)]},a.a.createElement(V.b,null,function(e){var t=e.getRailProps;return a.a.createElement("div",Object.assign({className:F.a.rail},o?t():{}))}),a.a.createElement(V.a,null,function(e){var t=e.handles,n=e.getHandleProps;return a.a.createElement("div",{className:F.a.handles},t.map(function(e){var t=e.id,r=e.percent;return a.a.createElement("div",Object.assign({key:t,style:{left:"".concat(r,"%")},className:F.a.handle},o?n(t):{}))}))}),a.a.createElement(V.e,{right:!1},function(e){var t=e.tracks,n=e.getTrackProps;return a.a.createElement("div",{className:F.a.tracks},t.map(function(e){var t=e.id,r=e.source,c=e.target;return a.a.createElement("div",Object.assign({key:t,className:F.a.track,style:{left:"".concat(r.percent,"%"),width:"".concat(c.percent-r.percent,"%")}},o?n():{}))}))}))},K=function(e){var t=e.player,n=e.song,r=e.trackSeek;return a.a.createElement("div",{className:F.a.player},a.a.createElement(T,{icon:t.isPlaying?"play":"pause"},a.a.createElement("span",{className:F.a.heading},"Currently ",t.isPlaying?"playing":"paused")),n?"":a.a.createElement("div",{className:F.a.emptyContent},a.a.createElement(N.a,{icon:"music",size:"2x",className:F.a.paddedIcon}),"Nothing's playing."),n?a.a.createElement("div",{className:F.a.songCard},a.a.createElement("div",{className:F.a.coverArt,style:{backgroundImage:"url(".concat(G(n),")")},title:"Cover art"}),a.a.createElement("span",{className:F.a.title,title:n.song.title},n.song.title),a.a.createElement("p",{className:F.a.infoLine},a.a.createElement("span",{className:n.song.artist?"":F.a.noArtist,title:n.song.artist},n.song.artist?n.song.artist:"Unknown artist"),n.song.explicit?a.a.createElement("span",{className:F.a.tag,title:"Contains explicit lyrics"},"explicit"):"",a.a.createElement("span",{className:F.a.tag,title:"played ".concat(n.playCount," times")},a.a.createElement(N.a,{icon:"music",size:"xs"})," ",n.playCount)),a.a.createElement("div",{className:F.a.progress},a.a.createElement("span",{className:F.a.position},Q(t.position)),a.a.createElement(Z,{position:t.position,duration:t.duration,onChange:function(e){return r(e)}}),a.a.createElement("span",{className:F.a.duration},Q(t.duration)))):"")},$="AcceptSongRequest",ee="AdminQueueInsert",te="AdminQueueMoveDown",ne="AdminQueueMoveUp",re="AdminQueueRemove",ae="PlayerState",ce="QueueRequest",oe="QueueResponse",le="SearchRequest",se="SearchResponse",ue="Seek",ie="SetBanned",de="SetPlaying",pe="SetVolume",me="Skip",be="SongSubUnsub",fe="SongUpdate",_e="Vote",ge="Welcome",ve="Internal/AppendSearchResult",ye="Internal/Connected",he="Internal/VolumeMute",ke="Internal/PlayerTick",Ce="Internal/SearchClear",Oe="Internal/SearchNextPage",Ee="Internal/SearchPreviousPage",xe=Object(l.b)(function(e){return{player:e.player,song:e.player.song}},function(e){return{trackSeek:function(t){w(h)&&e({type:ue,position:parseInt(parseFloat(t))})}}})(K),Se=n(35),je=n(33),we=n(5),Pe=n.n(we);function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}A.b.add(q.r,q.q,q.b,q.a,q.t,q.l,q.e,q.o,q.h,je.a,je.b);var Ne=function(e){var t,n=e.song,r=e.acceptClicked,c=e.voteUpClicked,o=e.voteDownClicked,l=e.banClicked,s=e.addToAdminQueueClicked,u=e.removeFromAdminQueueClicked,i=e.moveUpAdminQueueClicked,d=e.moveDownAdminQueueClicked,p=null!==n.adminIndex,f=0!==n.userVote,y="New"===n.state&&n.reviewRequired,h="Available"===n.state||"New"===n.state&&!n.reviewRequired,k=!p&&y&&w(_),C=!p&&y&&w(v),E=!p&&h&&(f||w(m)),x=!p&&h&&(f||w(b)),S=w(O);return a.a.createElement("div",{className:Pe.a.songCard},a.a.createElement("div",{className:Pe.a.coverArt,style:{backgroundImage:"url(".concat(G(n),")")},title:"Cover art"}),a.a.createElement("span",{className:Pe.a.title,title:n.song.title},n.song.title),a.a.createElement("p",{color:"textSecondary",className:Pe.a.infoLine},n.song.artist&&a.a.createElement("span",{className:n.song.artist?"":Pe.a.noArtist,title:n.song.artist},n.song.artist),n.song.explicit&&a.a.createElement("span",{className:Pe.a.tag,title:"Contains explicit lyrics"},"explicit"),n.playCount>0&&a.a.createElement("span",{className:Pe.a.tag,title:"Played ".concat(n.playCount," times")},a.a.createElement(N.a,{icon:"music",size:"xs"})," ",n.playCount)),a.a.createElement("div",{className:Pe.a.votes},!p&&w(g)&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.ban,(t={},Ie(t,Pe.a.extra,"Banned"!==n.state),Ie(t,Pe.a.active,"Banned"===n.state),t)),onClick:function(){return l&&l(n)},title:"Ban this song (cannot be played nor searched)"},a.a.createElement(N.a,{icon:"gavel"})),p&&S&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.promote,Pe.a.extra),onClick:function(){return u&&u(n)},title:"Remove this song from the admin queue"},a.a.createElement(N.a,{icon:"trash"})),a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.promote,Pe.a.extra),onClick:function(){return i&&i(n.adminIndex)},title:"Move up in admin queue"},a.a.createElement(N.a,{icon:"arrow-up"})),a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.promote,Pe.a.extra),onClick:function(){return d&&d(n.adminIndex)},title:"Move down in admin queue"},a.a.createElement(N.a,{icon:"arrow-down"}))),!p&&S&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.promote,Pe.a.extra),onClick:function(){return s&&s(n)},title:"Promote this song (last in admin queue)"},a.a.createElement(N.a,{icon:"star"})),p&&a.a.createElement("span",{className:Pe.a.voteCount,title:"Promoted song: plays before other songs"},a.a.createElement(N.a,{icon:"star",className:Pe.a.promoted,size:"xs"})),!p&&"Available"===n.state&&a.a.createElement("span",{className:Pe.a.voteCount},n.votes),E&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.voteUp,Ie({},Pe.a.active,1===n.userVote)),onClick:function(e){return c&&c(n)},title:"Up-vote this song"},a.a.createElement(N.a,{icon:"thumbs-up"})),x&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.voteDown,Ie({},Pe.a.active,-1===n.userVote)),onClick:function(e){return o&&o(n)},title:"Down-vote this song"},a.a.createElement(N.a,{icon:"thumbs-down"})),k&&!C&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.suggest),onClick:function(e){return c&&c(n)},title:"Request this song to be reviewed"},0===n.userVote?"request review":"cancel request",n.votes>0&&a.a.createElement("span",null,"\xa0(",n.votes,")")),C&&a.a.createElement("button",{className:D()(Pe.a.button,Pe.a.suggest),onClick:function(e){return r&&r(n)},title:"Accept this song"},"accept","New"===n.state&&n.votes>0&&a.a.createElement("span",null,"\xa0(",n.votes,")"))),a.a.createElement("div",{className:Pe.a.duration,title:"Song duration (MM:SS)"},Q(n.song.duration)),a.a.createElement(N.a,{className:Pe.a.resolver,title:"Resolved by ".concat(n.song.resolver),icon:["fab",n.song.resolver]}))},Ae=n(25),qe=n.n(Ae);A.b.add(q.f,q.g);var Qe=a.a.forwardRef(function(e,t){return a.a.createElement("div",{ref:t},a.a.createElement(Ne,e))}),Ue=Object(Se.b)(Qe)({flip:{transition:{ease:"easeOut"}}}),Re=function(e){var t=e.queue,n=e.voteUpClicked,r=e.voteDownClicked,c=e.banClicked,o=e.addToAdminQueueClicked,l=e.removeFromAdminQueueClicked,s=e.moveUpAdminQueueClicked,u=e.moveDownAdminQueueClicked,i=e.handleMouseEnter,d=e.handleMouseLeave;return a.a.createElement("div",{className:qe.a.queue},a.a.createElement(T,{icon:"list-alt"},a.a.createElement("span",{className:qe.a.heading},"Up next")),t.length?"":a.a.createElement("div",{className:qe.a.emptyContent},a.a.createElement(N.a,{icon:"meh",size:"2x",className:qe.a.paddedIcon}),"Queue is empty."),a.a.createElement("div",{className:qe.a.scrollArea,onMouseEnter:i,onMouseLeave:d},a.a.createElement(Se.a,{animateOnMount:!1},t.map(function(e){return a.a.createElement(Ue,{key:R(e),song:e,voteUpClicked:n,voteDownClicked:r,banClicked:c,addToAdminQueueClicked:o,removeFromAdminQueueClicked:l,moveUpAdminQueueClicked:s,moveDownAdminQueueClicked:u})}))))},Le=function(e){return{voteUpClicked:function(t){var n=1===t.userVote?0:1;e({type:_e,songId:t.song.id,value:n})},voteDownClicked:function(t){var n=-1===t.userVote?0:-1;e({type:_e,songId:t.song.id,value:n})},banClicked:function(t){e({type:ie,songId:t.song.id,isBanned:"Banned"!==t.state})},addToAdminQueueClicked:function(t){e({type:ee,songId:t.song.id})},removeFromAdminQueueClicked:function(t){e({type:re,songId:t.song.id})},moveUpAdminQueueClicked:function(t){e({type:ne,position:t})},moveDownAdminQueueClicked:function(t){e({type:te,position:t})}}};function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=Object(l.b)(function(e){return{queue:e.queues.queue.public}},function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Me(e,t,n[t])})}return e}({handleMouseEnter:function(){e({type:"Internal/QueueLock"})},handleMouseLeave:function(){e({type:"Internal/QueueRelease"})}},Le(e))})(Re),De=n(14),Te=n.n(De);function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Fe(e,t,n[t])})}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ze={make:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{_initial:Ve(e),_real:Ve(e),public:Ve(e),_locked:!1}},reset:function(e){return ze._maybe_update(e,function(t){return e._initial})},update:function(e,t,n){return ze._maybe_update(e,function(e){return t},void 0!==n&&n)},updateItem:function(e,t,n){return Be({},e,{_real:e._real.map(ze._applier(t,n)),public:e.public.map(ze._applier(t,n))})},appendItem:function(e,t){return ze._maybe_update(e,function(e){return Ve(e).concat([t])})},lock:function(e){return Be({},e,{_locked:!0})},release:function(e){return Be({},e,{_locked:!1,public:e._real})},_applier:function(e,t){return function(n){return t(n)===t(e)?e:n}},_maybe_update:function(e,t,n){return Be({},e,{_real:t(e._real),public:!n&&e._locked?e.public:t(e.public)})}};function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ye(e,t,n[t])})}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=0,Ge=1,Xe=2,Ze=3,Ke=4,$e="Requested",et="Banned",tt="Library",nt={query:"",results:ze.make([]),state:Je,filter:null,offset:0},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Internal/SearchQuery":return He({},e,{query:t.query});case le:return He({},e,{state:Ge,results:ze.reset(e.results)});case Oe:return e.state===Ge?e:He({},e,{offset:e.offset+X(),results:ze.reset(e.results)});case Ee:return e.state===Ge?e:He({},e,{offset:e.offset-X(),results:ze.reset(e.results)});case"Internal/SearchFilter":return He({},e,{filter:e.filter===t.filter?null:t.filter,offset:0});case Ce:return He({},e,{state:Je,query:"",filter:null,offset:0});case"Internal/SearchError":return He({},e,{state:Ke,results:ze.reset(e.results)});case ve:var n=t.song;return He({},e,{state:null===n?t.hasMore?Xe:Ze:Ge,results:null===n?e.results:ze.appendItem(e.results,n)});case fe:return He({},e,{results:ze.updateItem(e.results,t.song,U)});default:return e}};function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}A.b.add(q.n,q.m,q.s,q.g,q.e,q.o,q.r,q.c);var ot=function(e){var t=e.checked,n=e.onClick,r=e.onChange,c=ct(e,["checked","onClick","onChange"]);return a.a.createElement("label",Object.assign({className:D()(Te.a.togglerWithIcon)},c),a.a.createElement("input",{type:"checkbox",checked:t,onClick:n,onChange:r}),a.a.createElement("span",null,c.children))},lt=function(){return a.a.createElement("div",null,a.a.createElement(N.a,{className:Te.a.paddedIcon,icon:"spinner",spin:!0,size:"2x"}),"Searching\u2026")},st=function(e){var t=e.startSearch,n=e.state,r=e.searchFilter,c=e.clearClicked,o=e.results,l=e.query,s=e.offset,u=e.filter,i=e.searchNextPage,d=e.searchPreviousPage,p=e.onQueryChange,m=e.acceptClicked,b=e.voteUpClicked,f=e.voteDownClicked,_=e.banClicked,g=e.addToAdminQueueClicked;return a.a.createElement("div",{className:Te.a.search},a.a.createElement(T,{className:D()(at({},Te.a.spaceBetween,u===tt)),icon:u===tt?"book":"search"},u!==tt?a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{className:Te.a.searchInput,placeholder:"Search songs",value:l,onChange:p,disabled:n===Ge,onKeyPress:function(e){return"Enter"===e.key&&t()}}),a.a.createElement("button",{onClick:function(){return c()},disabled:!l.length,className:D()(Te.a.clearSearch,at({},Te.a.visible,!!l.length))},a.a.createElement(N.a,{icon:"times"})),a.a.createElement(I,{do:"Accept",on:"all"},a.a.createElement(ot,{checked:u===$e,onChange:function(){return r(l,$e)},title:"Show requested only"},"R")),a.a.createElement(I,{do:"Ban",on:"all"},a.a.createElement(ot,{checked:u===et,onChange:function(){return r(l,et)},title:"Show banned only"},a.a.createElement(N.a,{icon:"gavel"}))),a.a.createElement("button",{className:Te.a.searchLibrary,onClick:function(){return r(l,tt)},title:"All songs in the library"},a.a.createElement(N.a,{icon:"book"}),"\xa0Library")):a.a.createElement(a.a.Fragment,null,"All songs",a.a.createElement("button",{className:Te.a.searchLibrary,onClick:function(){return r(l,tt)}},a.a.createElement(N.a,{icon:"search"}),"\xa0Back to search"))),n===Je?a.a.createElement("div",{className:Te.a.emptyContent},a.a.createElement(N.a,{className:Te.a.paddedIcon,icon:"search",size:"2x"}),"Find songs using the search above."):"",n!==Ze||o.length?"":a.a.createElement("div",{className:Te.a.emptyContent},a.a.createElement(N.a,{className:Te.a.paddedIcon,icon:"meh",size:"2x"}),"No results.",a.a.createElement("br",null),"Check the spelling or try something less specific!"),n===Ge||n===Xe||n===Ze?a.a.createElement("div",{className:Te.a.scrollArea},(n===Xe||n===Ze)&&u===tt&&s>0?a.a.createElement("button",{onClick:function(){return d()}},"Previous Page"):"",o.map(function(e){return a.a.createElement(Ne,{key:e.song.id,song:e,acceptClicked:m,voteUpClicked:b,voteDownClicked:f,addToAdminQueueClicked:g,banClicked:_})}),n===Ge?a.a.createElement(lt,null):"",n===Xe&&u===tt?a.a.createElement("button",{onClick:function(){return i()}},"Next Page"):""):"")};function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=Object(l.b)(function(e){return{results:e.search.results.public,state:e.search.state,query:e.search.query,filter:e.search.filter,offset:e.search.offset}},function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ut(e,t,n[t])})}return e}({onQueryChange:function(t){e({type:"Internal/SearchQuery",query:t.target.value})},acceptClicked:function(t){e({type:$,songId:t.song.id})},clearClicked:function(){e({type:Ce})},searchFilter:function(t,n){e({type:"Internal/SearchFilter",filter:n}),e({type:le})},startSearch:function(){e({type:le})},searchNextPage:function(){e({type:Oe})},searchPreviousPage:function(){e({type:Ee})}},Le(e))})(st),dt=n(34),pt=n.n(dt);A.b.add(q.k);var mt=function(e){var t,n,r,c=e.connected;return a.a.createElement("div",{className:D()(pt.a.systemOverlay,(t={},n=pt.a.connected,r=c,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))},a.a.createElement(N.a,{icon:"plug"}),"\xa0Connecting\u2026")},bt=Object(l.b)(function(e){return{connected:e.system.connected}},{})(mt),ft=n(43),_t=n.n(ft);A.b.add(q.u);var gt=function(e){var t=e.user;return a.a.createElement("div",{className:_t.a.user},a.a.createElement(N.a,{icon:"user"})," ",null===t.name?a.a.createElement("em",null,"anonymous"):t.name)},vt=Object(l.b)(function(e){return{user:e.user}},{})(gt),yt=n(13),ht=n.n(yt);A.b.add(q.d,q.v);var kt=function(e){var t=e.volume,n=e.onChange,r=e.onUpdate;return a.a.createElement(V.c,{className:ht.a.volume,domain:[0,120],step:5,mode:2,disabled:!0,onChange:function(e){return n&&n(e[0])},onUpdate:function(e){return r&&r(e[0])},values:[t]},a.a.createElement(V.b,null,function(e){var t=e.getRailProps;return a.a.createElement("div",Object.assign({className:ht.a.rail},t()))}),a.a.createElement(V.a,null,function(e){var t=e.handles,n=e.getHandleProps;return a.a.createElement("div",{className:"handles"},t.map(function(e){var t=e.id,r=e.percent;return a.a.createElement("div",Object.assign({key:t,style:{left:"".concat(r,"%")},className:ht.a.handle},n(t)))}))}),a.a.createElement(V.e,{right:!1},function(e){var t=e.tracks,n=e.getTrackProps;return a.a.createElement("div",{className:ht.a.tracks},t.map(function(e){var t=e.id,r=e.source,c=e.target;return a.a.createElement("div",Object.assign({key:t,className:ht.a.track,style:{left:"".concat(r.percent,"%"),width:"".concat(c.percent-r.percent,"%")}},n()))}))}),a.a.createElement(V.d,{values:[100]},function(e){var t=e.ticks;return a.a.createElement("div",{className:ht.a.ticks},t.map(function(e){return a.a.createElement("div",{key:e.id,style:{left:"".concat(e.percent,"%")},className:ht.a.tick})}))}))},Ct=function(e){var t=e.player,n=e.playPauseClicked,r=e.skipClicked,c=e.volumeChanged,o=e.muteClicked;return x.some(w)&&a.a.createElement("div",{className:ht.a.controller},a.a.createElement(T,{icon:"gamepad"},a.a.createElement("span",{className:ht.a.heading},"Control the radio")),a.a.createElement("div",{className:ht.a.body},a.a.createElement(I,{I:y},a.a.createElement("button",{className:D()(ht.a.button,ht.a.playPause),onClick:function(){return n(t.isPlaying)}},a.a.createElement(N.a,{icon:t.isPlaying?"pause":"play"})," ",t.isPlaying?"Pause":"Play")),a.a.createElement(I,{I:C},a.a.createElement("button",{className:D()(ht.a.button,ht.a.next),onClick:function(){return r()}},a.a.createElement(N.a,{icon:"step-forward"})," Skip")),a.a.createElement(I,{I:k},a.a.createElement("div",{style:{display:"flex",alignItems:"center"}},a.a.createElement(I,{I:y},a.a.createElement(N.a,{icon:"volume-up",className:ht.a.volumeIcon,onClick:function(){return o()}})),a.a.createElement(kt,{volume:t.volume,onUpdate:c})))))},Ot=Object(l.b)(function(e){return{player:e.player,song:e.player.song}},function(e){return{volumeChanged:function(t){w(k)&&e({type:pe,volume:t})},muteClicked:function(){w(k)&&w(y)&&e({type:he})},playPauseClicked:function(t){w(y)&&e({type:de,isPlaying:!t})},skipClicked:function(){w(C)&&e({type:me})}}})(Ct),Et=n(44),xt=n.n(Et),St=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(bt,null),a.a.createElement("header",{className:xt.a.header},a.a.createElement("h1",null,"djenius"),a.a.createElement(vt,null)),a.a.createElement(xe,null),a.a.createElement(Ot,null),a.a.createElement(We,null),a.a.createElement(I,{I:f},a.a.createElement(it,null)))};function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){wt(e,t,n[t])})}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pt={queue:ze.make()},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return jt({},e,{queue:ze.update(e.queue,t.queue,t.urgent)});case fe:return jt({},e,{queue:ze.updateItem(e.queue,t.song,R)});case"Internal/QueueLock":return jt({},e,{queue:ze.lock(e.queue)});case"Internal/QueueRelease":return jt({},e,{queue:ze.release(e.queue)});default:return e}};function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){At(e,t,n[t])})}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qt={pause:!0,duration:0,position:0,volume:0,song:null},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Nt({},e,t.player,{duration:t.player.duration});case ke:return Nt({},e,{position:e.position+1});default:return e}};function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Rt(e,t,n[t])})}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt={connected:!1,visible:!0},Mt=Object(s.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Ut({},e,{connected:t.connected});case"Internal/VisibilityChange":return Ut({},e,{visible:t.visible});case"Internal/KeyPress":return"e"===t.event.key&&w(E)?Ut({},e,{eventLog:Ut({},e.eventLog,{visible:!e.eventLog.visible})}):e;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,coverUrl:"",caps:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Ut({},e,t.user);default:return e}},queues:It,search:rt,player:Qt}),Wt=n(8),Dt=n.n(Wt),Tt=n(3),Bt=Dt.a.mark(Gt);function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vt=function e(){Ft(this,e)},zt=function e(){Ft(this,e)};function Ht(){return new Promise(function(e,t){console.log("Connecting to WS:",z);var n=new WebSocket(z);n.onopen=function(){console.log("Connected to WS"),e(n)},n.onerror=function(e){t(e)}})}function Yt(e){return Object(u.e)(function(t){return e.onmessage=function(e){t(JSON.parse(e.data))},e.onclose=function(){t(new zt),t(u.a)},e.onerror=function(e){},t(new Vt),function(){e.onmessage=null}},u.b.expanding(20))}var Jt=0;function Gt(e,t){var n,r,a,c,o;return Dt.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Object(Tt.a)(Ht);case 3:return n=l.sent,l.next=6,Object(Tt.a)(Yt,n);case 6:return r=l.sent,l.next=9,Object(Tt.c)(t,n);case 9:a=l.sent,Jt=0;case 11:return l.next=14,Object(Tt.f)(r);case 14:return c=l.sent,l.next=17,e(c);case 17:l.next=11;break;case 19:l.next=23;break;case 21:l.prev=21,l.t0=l.catch(0);case 23:if(l.prev=23,r&&r.close(),n&&n.close(),!a){l.next=29;break}return l.next=29,Object(Tt.b)(a);case 29:return o=Math.min(10,Math.pow(H,Jt++)),console.warn("WS disconnected; reconnecting in ".concat(o," s")),l.next=33,Object(u.d)(1e3*o);case 33:return l.next=35,Gt(e,t);case 35:return l.finish(23);case 36:return l.abrupt("return",n);case 37:case"end":return l.stop()}},Bt,this,[[0,21,23,36]])}function Xt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Zt=Dt.a.mark(an),Kt=Dt.a.mark(cn),$t=Dt.a.mark(on),en=Dt.a.mark(ln),tn=Dt.a.mark(sn),nn=Dt.a.mark(un),rn=Dt.a.mark(dn);function an(){var e,t;return Dt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(u.d)(1e3);case 3:return n.next=5,Object(Tt.e)(function(e){return e.player.isPlaying});case 5:return e=n.sent,n.next=8,Object(Tt.e)(function(e){return e.system.visible});case 8:if(t=n.sent,!e||!t){n.next=12;break}return n.next=12,Object(Tt.d)({type:ke});case 12:n.next=0;break;case 14:case"end":return n.stop()}},Zt,this)}function cn(){var e;return Dt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Tt.e)(function(e){return e.system});case 3:if(!(e=t.sent).connected||!e.visible){t.next=7;break}return t.next=7,Object(Tt.d)({type:ce});case 7:return t.next=9,Object(u.d)(2e3);case 9:t.next=0;break;case 11:case"end":return t.stop()}},Kt,this)}function on(){var e,t;return Dt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Tt.e)(function(e){return e.search.results._real});case 3:return e=n.sent,n.next=6,Object(Tt.f)([Ce,se]);case 6:if((t=n.sent).type!==Ce){n.next=12;break}return n.next=10,Object(Tt.d)({type:be,unsubscribe:(e||[]).map(U)});case 10:n.next=15;break;case 12:if(t.type!==se||!t.results.length){n.next=15;break}return n.next=15,Object(Tt.d)({type:be,subscribe:t.results.map(U)});case 15:n.next=0;break;case 17:case"end":return n.stop()}},$t,this)}function ln(e){var t,n;return Dt.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.debug("serv\u2192me",e),!(e instanceof Vt)){r.next=7;break}return r.next=4,Object(Tt.d)({type:ye,connected:!0});case 4:return r.abrupt("return");case 7:if(!(e instanceof zt)){r.next=11;break}return r.next=10,Object(Tt.d)({type:ye,connected:!1});case 10:return r.abrupt("return");case 11:t=e.type,n=Xt(e,["type"]),r.t0=t,r.next=r.t0===ae?15:r.t0===ge?18:r.t0===oe?21:r.t0===fe?24:r.t0===se?27:30;break;case 15:return r.next=17,Object(Tt.d)({type:ae,player:n});case 17:return r.abrupt("break",31);case 18:return r.next=20,Object(Tt.d)({type:ge,user:{name:n.myId,caps:n.caps,coverUrl:n.coverUrl,libraryPageSize:n.libraryPageSize}});case 20:return r.abrupt("break",31);case 21:return r.next=23,Object(Tt.d)({type:oe,queue:n.queue,urgent:n.urgent});case 23:return r.abrupt("break",31);case 24:return r.next=26,Object(Tt.d)({type:fe,song:n.song});case 26:return r.abrupt("break",31);case 27:return r.next=29,Object(Tt.d)({type:se,opaque:n.opaque,hasMore:n.hasMore,results:n.results});case 29:case 30:return r.abrupt("break",31);case 31:case"end":return r.stop()}},en,this)}function sn(e){var t,n,r,a,c,o,l;return Dt.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=function(e){var t;return Dt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Tt.e)(function(e){return e.player.duration});case 2:if(t=n.sent,!(e.position>=t)){n.next=5;break}return n.abrupt("return");case 5:a(e);case 6:case"end":return n.stop()}},r,this)},o=function(){var e,t,r,c,o,l,s,u,i,d,p;return Dt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Tt.f)([le,Oe,Ee]);case 3:return n.next=5,Object(Tt.e)(function(e){return e.search});case 5:if(e=n.sent,t=e.query&&e.query.length,r=!!e.filter,t||r){n.next=13;break}return console.log("clear search"),n.next=12,Object(Tt.d)({type:Ce});case 12:return n.abrupt("continue",0);case 13:return c=Math.random().toString(36).substring(7),n.next=16,a({type:le,query:e.query,opaque:c,filter:e.filter,offset:e.offset});case 16:return n.next=19,Object(Tt.f)([se,Ce]);case 19:if((o=n.sent).type!==Ce){n.next=22;break}return n.abrupt("break",60);case 22:if(o.opaque===c){n.next=24;break}return n.abrupt("continue",16);case 24:if(o.results.length){n.next=28;break}return n.next=27,Object(Tt.d)({type:ve,hasMore:!1,song:null});case 27:return n.abrupt("break",60);case 28:l=!0,s=!1,u=void 0,n.prev=31,i=o.results[Symbol.iterator]();case 33:if(l=(d=i.next()).done){n.next=40;break}return p=d.value,n.next=37,Object(Tt.d)({type:ve,song:p});case 37:l=!0,n.next=33;break;case 40:n.next=46;break;case 42:n.prev=42,n.t0=n.catch(31),s=!0,u=n.t0;case 46:n.prev=46,n.prev=47,l||null==i.return||i.return();case 49:if(n.prev=49,!s){n.next=52;break}throw u;case 52:return n.finish(49);case 53:return n.finish(46);case 54:if(!o.hasMore){n.next=58;break}return n.next=57,Object(Tt.d)({type:ve,hasMore:!0,song:null});case 57:return n.abrupt("break",60);case 58:n.next=16;break;case 60:n.next=0;break;case 62:case"end":return n.stop()}},n,this,[[31,42,46,54],[47,,49,53]])},c=function(){var e,n,r,c;return Dt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Tt.e)(function(e){return e.player});case 2:if(e=t.sent,n=e.volume,r=0===n?100:0,c=Math.sign(r-n),0===r||e.isPlaying){t.next=9;break}return t.next=9,a({type:de,isPlaying:!0});case 9:if(n===r){t.next=18;break}return n=(n+=10*c)<0?0:n>100?100:n,t.next=14,Object(u.d)(100);case 14:return t.next=16,a({type:pe,volume:n});case 16:t.next=9;break;case 18:if(0!==r||!e.isPlaying){t.next=21;break}return t.next=21,a({type:de,isPlaying:!1});case 21:case"end":return t.stop()}},t,this)},a=function(t){e.readyState===WebSocket.OPEN?(console.debug("me\u2192serv",t),e.send(JSON.stringify(t))):console.warn("Tried to send a message on a closed socket")},t=Dt.a.mark(c),n=Dt.a.mark(o),r=Dt.a.mark(l),s.next=7,Object(Tt.g)(_e,a);case 7:return s.next=9,Object(Tt.c)(o);case 9:return s.next=11,Object(Tt.g)(ie,a);case 11:return s.next=13,Object(Tt.g)($,a);case 13:return s.next=15,Object(Tt.g)(ee,a);case 15:return s.next=17,Object(Tt.g)(re,a);case 17:return s.next=19,Object(Tt.g)(ne,a);case 19:return s.next=21,Object(Tt.g)(te,a);case 21:return s.next=23,Object(Tt.g)(be,a);case 23:return s.next=25,Object(Tt.g)(ce,a);case 25:return s.next=27,Object(Tt.g)(de,a);case 27:return s.next=29,Object(Tt.g)(me,a);case 29:return s.next=31,Object(Tt.h)(250,ue,l);case 31:return s.next=33,Object(Tt.h)(250,pe,a);case 33:return s.next=35,Object(Tt.g)(he,c);case 35:case"end":return s.stop()}},tn,this)}function un(){var e;return Dt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Tt.f)(ge);case 3:return t.next=5,Object(Tt.e)(function(e){return e.user});case 5:e=t.sent,Y=(n=e).coverUrl,J=n.libraryPageSize,console.log("user changed:",e,"; updating abilities"),j(e),t.next=0;break;case 11:case"end":return t.stop()}var n},nn,this)}function dn(){return Dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Tt.c)(Gt,ln,sn);case 2:return e.next=4,Object(Tt.c)(on);case 4:return e.next=6,Object(Tt.c)(cn);case 6:return e.next=8,Object(Tt.c)(an);case 8:return e.next=10,Object(Tt.c)(un);case 10:case"end":return e.stop()}},rn,this)}var pn=dn,mn=Object(u.c)(),bn=Object(s.d)(Mt,Object(s.a)(mn));document.addEventListener("visibilitychange",function(e){bn.dispatch({type:"Internal/VisibilityChange",visible:"visible"===document.visibilityState})},!1),mn.run(pn),o.a.render(a.a.createElement(l.a,{store:bn},a.a.createElement(St,null)),document.getElementById("root"))}},[[45,2,1]]]);
//# sourceMappingURL=main.2f6ff3ff.chunk.js.map